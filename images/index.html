<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>住商不動產濬瑒、子菲 | 精選物件 | 專業服務</title>
    
    <!-- Meta 標籤 -->
    <meta name="description" content="住商不動產濬瑒、子菲專業服務，提供楊梅地區精選優質物件，新都悅、世紀美妝等優質社區，三房車位物件推薦">
    <meta name="keywords" content="住商不動產,濬瑒,子菲,楊梅,新都悅,世紀美妝,三房,車位,不動產,房屋">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="住商不動產濬瑒、子菲 | 精選物件 | 專業服務">
    <meta property="og:description" content="住商不動產濬瑒、子菲專業服務，提供楊梅地區精選優質物件，新都悅、世紀美妝等優質社區，三房車位物件推薦">
    <meta property="og:image" content="">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="住商不動產濬瑒、子菲 | 精選物件 | 專業服務">
    <meta property="twitter:description" content="住商不動產濬瑒、子菲專業服務，提供楊梅地區精選優質物件，新都悅、世紀美妝等優質社區，三房車位物件推薦">
    <meta property="twitter:image" content="">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- 手機響應式優化 -->
    <style>
        /* 基本樣式 */
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .filter-buttons {
            display: inline-flex;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 0.3rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        /* 大螢幕 3 欄佈局 */
        @media (min-width: 1200px) {
            .properties-grid {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 2rem !important;
                max-width: 1400px !important;
                margin: 2rem auto !important;
            }
            
            /* 電腦版卡片格局屋齡文字大小 */
            .property-card div[style*="background: #e8f5e8"] {
                font-size: 0.9rem !important;
            }
            
            .property-card {
                max-width: 360px !important;
                margin: 0 auto !important;
                padding: 1rem !important;
            }
            
            .photo-item {
                width: 100px !important;
                height: 75px !important;
                border-radius: 8px !important;
            }
            
            /* v1.2 電腦版文字大小參數 */
            .header h1 {
                font-size: 2.5rem !important;
            }
            
            .property-title {
                font-size: 1.2rem !important;
            }
            
            .price-highlight {
                font-size: 1.3rem !important;
            }
            
            .price-highlight span {
                font-size: 1.1rem !important;
            }
            
            .original-price {
                font-size: 1.2rem !important;
            }
            
            .features-list li {
                font-size: 0.85rem !important;
            }
            
            .contact-button {
                font-size: 1.2rem !important;
            }
        }
        
        /* 中等螢幕 2 欄佈局 */
        @media (min-width: 769px) and (max-width: 1199px) {
            .properties-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 1.9rem !important;
                max-width: 1000px !important;
                margin: 2rem auto !important;
            }
            
            /* 中等螢幕卡片格局屋齡文字大小 */
            .property-card div[style*="background: #e8f5e8"] {
                font-size: 0.9rem !important;
            }
            
            .property-card {
                max-width: 420px !important;
                margin: 0 auto !important;
                padding: 1.1rem !important;
            }
            
            .property-title {
                font-size: 1.4rem !important;
                line-height: 1.3 !important;
            }
            
            .photo-item {
                width: 95px !important;
                height: 71px !important;
            }
            
            /* v1.2 中等螢幕文字大小參數 */
            .header h1 {
                font-size: 2.2rem !important;
            }
            
            .price-highlight {
                font-size: 1.2rem !important;
            }
            
            .price-highlight span {
                font-size: 1.0rem !important;
            }
            
            .original-price {
                font-size: 1.1rem !important;
            }
            
            .features-list li {
                font-size: 0.85rem !important;
            }
            
            .contact-button {
                font-size: 1.1rem !important;
            }
        }
        
        /* 平板橫向模式 */
        @media (min-width: 769px) and (max-width: 1024px) and (orientation: landscape) {
            .properties-grid {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 1.5rem !important;
            }
            
            .property-card {
                max-width: 300px !important;
                padding: 0.9rem !important;
            }
            
            .property-title {
                font-size: 1.15rem !important;
            }
        }
        
        /* 手機響應式設計 */
        @media (max-width: 768px) {
            /* 基本佈局調整 */
            .container {
                padding: 0;
                margin: 0;
                max-width: 100vw;
                height: 100vh;
                overflow-y: auto;
                overflow-x: hidden;
            }
            
            /* 標題區域優化 */
            .header h1 {
                font-size: 1.8rem !important;
                padding: 0.5rem !important;
            }
            
            .header p {
                font-size: 0.9rem !important;
                margin: 0.3rem 0 !important;
            }
            
            /* 搜尋和篩選區域 */
            .search-filter-container {
                padding: 0 !important;
                margin: 1rem 0 !important;
            }
            
            #property-search {
                width: 100% !important;
                max-width: none !important;
                padding: 0.6rem 1rem !important;
                font-size: 0.9rem !important;
            }
            
            .filter-buttons {
                flex-direction: row !important;
                gap: 0.3rem !important;
                padding: 0.3rem 0 !important;
                flex-wrap: wrap !important;
                justify-content: center !important;
            }
            
            .filter-button {
                padding: 0.5rem 0.8rem !important;
                font-size: 0.8rem !important;
                border-radius: 15px !important;
                flex: 1 !important;
                min-width: 0 !important;
            }
            
            /* 物件卡片優化 - 單欄垂直排列 */
            .properties-grid {
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
                padding: 0 !important;
            }
            
            .property-card {
                margin: 0 !important;
                padding: 1rem !important;
                border-radius: 12px !important;
                min-height: 400px !important;
            }
            
            .property-title {
                font-size: 1.2rem !important;
                margin-bottom: 0.8rem !important;
                line-height: 1.3 !important;
                word-wrap: break-word !important;
                word-break: break-all !important;
                white-space: nowrap !important;
                overflow: hidden !important;
                text-overflow: ellipsis !important;
                transform-origin: left !important;
                transition: font-size 0.3s ease !important;
                min-height: 2.6rem !important;
                display: flex !important;
                align-items: center !important;
            }
            
            /* 照片滾動區域 */
            .photo-scroll-container {
                margin: 0.3rem 0 !important;
                padding: 0.2rem 0 !important;
            }
            
            .photo-item {
                width: 85px !important;
                height: 64px !important;
                border-radius: 8px !important;
            }
            
            /* 物件資訊區域 */
            .property-info {
                padding: 0.6rem !important;
                margin: 0.4rem 0 !important;
            }
            
            .info-grid {
                grid-template-columns: 1fr 1fr !important;
                gap: 0.4rem !important;
                margin-bottom: 0.6rem !important;
            }
            
            .info-item {
                padding: 0.3rem !important;
                font-size: 0.9rem !important;
                text-align: center !important;
            }
            
            /* 地圖區域 */
            iframe {
                height: 100px !important;
                border-radius: 6px !important;
            }
            
            /* 聯絡方式區域 */
            .contact-grid {
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
                padding: 0 !important;
            }
            
            /* 相關資料連結手機版優化 */
            .contact-button {
                min-width: 150px !important;
                font-size: 0.8rem !important;
                padding: 0.5rem 0.8rem !important;
                margin: 0.2rem !important;
            }
            
            /* 客戶見證按鈕手機版優化 */
            #testimonialPrev, #testimonialNext {
                font-size: 0.8rem !important;
                padding: 0.4rem 0.8rem !important;
                margin: 0.2rem !important;
            }
            
            /* 房產資訊下拉選單手機版優化 */
            #propertyInfoMenu {
                min-width: 200px !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
            }
            
            #propertyInfoMenu a {
                padding: 0.6rem 0.8rem !important;
                font-size: 0.8rem !important;
            }
            
            .contact-grid > div {
                padding: 1.2rem !important;
            }
            
            /* 分頁按鈕 */
            .pagination {
                flex-wrap: wrap !important;
                gap: 0.3rem !important;
                padding: 0 !important;
            }
            
            .pagination button {
                padding: 0.4rem 0.8rem !important;
                font-size: 0.8rem !important;
                min-width: 35px !important;
            }
            
            /* 統計資訊 */
            #stats-container {
                padding: 0 !important;
            }
            
            /* 強制覆蓋所有手機版容器padding */
            .container {
                padding: 0 !important;
            }
            
            /* 覆蓋HTML中的inline style */
            section[style*="padding: 1.2rem"] {
                padding: 1.2rem 0.8rem !important;
            }
            
            section[style*="padding: 1.5rem 1.2rem"] {
                padding: 1.5rem 0.8rem !important;
            }
            
            /* 強制覆蓋搜尋框padding */
            #property-search {
                padding: 0.6rem 0.8rem !important;
            }
            
            #stats-container > div {
                padding: 0.8rem !important;
                font-size: 0.9rem !important;
            }
        }
        
        /* 超小螢幕優化 */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.6rem !important;
                padding: 0.4rem !important;
            }
            
            .header p {
                font-size: 0.8rem !important;
            }
            
            .property-title {
                font-size: 1.15rem !important;
                min-height: 2.4rem !important;
                margin-bottom: 0.6rem !important;
            }
            
            .property-card {
                padding: 0.8rem !important;
            }
            
            .photo-item {
                width: 75px !important;
                height: 56px !important;
            }
            
            .property-info {
                padding: 0.5rem !important;
            }
            
            .info-item {
                padding: 0.25rem !important;
                font-size: 1.0rem !important;
            }
            
            /* 手機版卡片格局屋齡文字大小 */
            .property-card div[style*="background: #e8f5e8"] {
                font-size: 0.9rem !important;
            }
            
            .property-card div[style*="strong.*格局"] {
                font-size: 0.9rem !important;
            }
            
            .property-card div[style*="strong.*屋齡"] {
                font-size: 0.9rem !important;
            }
            
            /* 強制覆蓋所有可能的格局屋齡文字 */
            div[style*="background: #e8f5e8"][style*="font-size: 1.3rem"] {
                font-size: 0.9rem !important;
            }
            
            /* 針對包含格局屋齡文字的div */
            .property-card div[style*="font-size: 1.3rem"] {
                font-size: 0.9rem !important;
            }
            
            iframe {
                height: 80px !important;
            }
            
            .contact-grid > div {
                padding: 1rem !important;
            }
            
            .filter-button {
                padding: 0.5rem 0.8rem !important;
                font-size: 0.8rem !important;
            }
            
            /* 詳細資訊彈窗超小螢幕優化 */
            .modal .detail-grid {
                grid-template-columns: 1fr !important;
                gap: 10px !important;
            }
        }
        
        /* 燈箱手機優化 */
        @media (max-width: 768px) {
            .modal {
                padding: 10px !important;
            }
            
            .modal > div {
                max-width: 105vw !important;
                max-height: 95vh !important;
                border-radius: 12px !important;
            }
            
            .modal img {
                max-width: 100vw !important;
                max-height: 60vh !important;
            }
            
            .modal .photo-info {
                padding: 10px 15px !important;
                margin-top: 15px !important;
                font-size: 0.9rem !important;
            }
            
            .modal .thumbnails {
                margin-top: 15px !important;
                padding: 10px 40px !important;
                max-width: 100vw !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                scrollbar-width: thin !important;
                scroll-behavior: smooth !important;
            }
            
            .modal .thumbnails::-webkit-scrollbar {
                height: 4px !important;
            }
            
            .modal .thumbnails::-webkit-scrollbar-track {
                background: #f1f1f1 !important;
                border-radius: 2px !important;
            }
            
            .modal .thumbnails::-webkit-scrollbar-thumb {
                background: #667eea !important;
                border-radius: 2px !important;
            }
            
            .modal .thumbnails img {
                width: 50px !important;
                height: 37px !important;
                flex-shrink: 0 !important;
            }
            
            /* 詳細資訊彈窗手機優化 */
            .modal h2 {
                font-size: 1.1rem !important;
            }
            
            .modal .grid {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }
            
            .modal .contact-buttons {
                flex-direction: column !important;
                gap: 10px !important;
            }
            
            .modal .photo-preview img {
                width: 60px !important;
                height: 45px !important;
            }
            
            /* 主要資訊卡片手機優化 */
            .modal .main-info-grid {
                grid-template-columns: 1fr 1fr 1fr !important;
                gap: 8px !important;
            }
            
            .modal .main-info-grid > div {
                padding: 10px !important;
            }
            
            .modal .main-info-grid .info-title {
                font-size: 0.7rem !important;
            }
            
            .modal .main-info-grid .info-value {
                font-size: 1.1rem !important;
            }
            
            /* 詳細資訊表格手機優化 */
            .modal .detail-grid {
                grid-template-columns: 1fr 1fr !important;
                gap: 12px !important;
            }
            
            /* 物件詳細資訊彈窗手機版緊縮優化 */
            .modal .property-detail-grid {
                grid-template-columns: 1fr !important;
                gap: 0.3rem !important;
                font-size: 1.0rem !important;
            }
            
            .modal .property-detail-grid > div {
                padding: 0.3rem 0 !important;
                border-bottom: 1px solid #f0f0f0 !important;
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
            }
            
            .modal .property-detail-grid > div:last-child {
                border-bottom: none !important;
            }
            
            /* 手機版彈窗滾動條優化 */
            .modal div[style*="overflow-y: auto"]::-webkit-scrollbar {
                width: 6px !important;
            }
            .modal div[style*="overflow-y: auto"]::-webkit-scrollbar-track {
                background: #f1f1f1 !important;
                border-radius: 3px !important;
            }
            .modal div[style*="overflow-y: auto"]::-webkit-scrollbar-thumb {
                background: #667eea !important;
                border-radius: 3px !important;
            }
            .modal div[style*="overflow-y: auto"]::-webkit-scrollbar-thumb:hover {
                background: #5a6fd8 !important;
            }
            
            /* 手機版箭頭按鈕優化 */
            .modal .main-image-arrow-left {
                width: 50px !important;
                height: 50px !important;
                font-size: 20px !important;
                left: 20px !important;
                background: rgba(0, 0, 0, 0.8) !important;
                box-shadow: 0 3px 10px rgba(0,0,0,0.5) !important;
            }
            
            .modal .main-image-arrow-right {
                width: 50px !important;
                height: 50px !important;
                font-size: 20px !important;
                right: 20px !important;
                background: rgba(0, 0, 0, 0.8) !important;
                box-shadow: 0 3px 10px rgba(0,0,0,0.5) !important;
            }
        }
        
        /* 地圖容器樣式優化 */
        .map-container {
            width: 100%;       /* 讓地圖跟隨容器寬度 */
            max-width: 600px;  /* 限制最大寬度，避免太大 */
            margin: 0 auto;    /* 水平置中 */
        }

        .map-container iframe {
            width: 100%;
            height: 300px;     /* 桌面版高度設為300px */
            border-radius: 8px;/* 加上圓角，看起來更現代 */
        }

        /* 地圖彈窗手機優化 */
        @media (max-width: 768px) {
            .map-container iframe {
                height: 250px; /* 手機版使用較小高度 */
            }
            
            /* 地圖彈窗滿版樣式 */
            .modal div[style*="max-height: 350vh"] {
                width: 100% !important;
                max-width: 100% !important;
                border-radius: 0 !important;
                height: 350vh !important;
            }
            
            .modal .map-container {
                width: 100% !important;
                height: 70vh !important;
                min-height: auto !important;
            }
            
            .modal .map-buttons {
                flex-direction: column !important;
                gap: 12px !important;
                padding: 15px 20px !important;
                background: #f8f9fa !important;
                border-top: 1px solid #e9ecef !important;
                flex-shrink: 0 !important;
            }
            
            .modal .map-buttons a {
                padding: 12px 24px !important;
                font-size: 1rem !important;
                border-radius: 8px !important;
                min-height: 45px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                text-align: center !important;
            }
            
            /* 地圖標題區域優化 */
            .modal div[style*="background: linear-gradient(135deg, #667eea, #764ba2)"] {
                padding: 15px 20px 10px 20px !important;
            }
            
            .modal div[style*="background: linear-gradient(135deg, #667eea, #764ba2)"] h2 {
                font-size: 1.1rem !important;
                margin: 0 !important;
            }
            
            .modal div[style*="background: linear-gradient(135deg, #667eea, #764ba2)"] p {
                font-size: 0.85rem !important;
                margin: 3px 0 0 0 !important;
            }
            
            /* 地圖彈窗整體優化 */
            .modal {
                padding: 8px !important;
                margin: 0 !important;
            }
            
            /* 強制覆蓋地圖彈窗樣式 */
            .modal div[style*="max-height: 350vh"] {
                width: 100vw !important;
                max-width: 100vw !important;
                height: 350vh !important;
                border-radius: 0 !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .modal div[style*="max-height: 350vh"] .map-container {
                width: 100% !important;
                height: 50vh !important;
                min-height: auto !important;
                max-height: none !important;
            }
            
            .modal div[style*="max-height: 350vh"] .map-container iframe {
                width: 100% !important;
                height: 100% !important;
                min-height: auto !important;
            }
            
            /* 詳細資訊彈窗滑動優化 */
            .modal div[style*="max-height: 90vh"] {
                max-height: 95vh !important;
                height: auto !important;
                overflow: hidden !important;
                display: flex !important;
                flex-direction: column !important;
            }
            
            .modal div[style*="overflow-y: auto"] {
                max-height: none !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                padding: 15px !important;
                flex: 1 !important;
                min-height: 0 !important;
                touch-action: pan-y !important;
            }
            
            /* 強制滑動區域 */
            .modal div[style*="flex: 1"] {
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                touch-action: pan-y !important;
            }
            
            /* 詳細資訊彈窗強制滑動 */
            .modal {
                touch-action: pan-y !important;
            }
            
            .modal div[style*="flex: 1"][style*="overflow-y: auto"] {
                overflow-y: scroll !important;
                -webkit-overflow-scrolling: touch !important;
                touch-action: pan-y !important;
                pointer-events: auto !important;
            }
            
            /* 手機版詳細資訊浮框專用樣式 - 不受其他影響 */
            #features-details-tooltip {
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                width: 90vw !important;
                max-width: 400px !important;
                max-height: 80vh !important;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
                border: 2px solid #667eea !important;
                border-radius: 15px !important;
                box-shadow: 0 20px 40px rgba(0,0,0,0.25) !important;
                z-index: 10001 !important;
                overflow: hidden !important;
                font-size: 0.9rem !important;
            }
            
            #features-details-tooltip > div:last-child {
                padding: 15px !important;
                line-height: 1.4 !important;
                cursor: pointer !important;
                max-height: calc(80vh - 80px) !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                touch-action: pan-y !important;
            }
            
            /* 學區交通浮框專用樣式 - 手機版置中 */
            #transportation-details-tooltip {
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                width: 90vw !important;
                max-width: 500px !important;
                max-height: 80vh !important;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
                border: 2px solid #667eea !important;
                border-radius: 15px !important;
                box-shadow: 0 20px 40px rgba(0,0,0,0.25) !important;
                z-index: 10001 !important;
                overflow: hidden !important;
                font-size: 0.9rem !important;
            }
            
            /* 電腦版學區交通浮框置中樣式 */
            @media (min-width: 769px) {
                #transportation-details-tooltip {
                    position: fixed !important;
                    top: 50% !important;
                    left: 50% !important;
                    transform: translate(-50%, -50%) !important;
                    width: auto !important;
                    max-width: 600px !important;
                    min-width: 400px !important;
                    max-height: 70vh !important;
                    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
                    border: 2px solid #667eea !important;
                    border-radius: 15px !important;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.25) !important;
                    z-index: 10001 !important;
                    overflow: hidden !important;
                    font-size: 0.95rem !important;
                }
                
                /* 電腦版地圖容器優化 - 只影響電腦版 */
                .modal .map-container {
                    height: 30vh !important;
                    min-height: 300px !important;
                }
                
                /* 確保手機版地圖容器不受影響 */
                @media (max-width: 768px) {
                    .modal .map-container {
                        height: 50vh !important;
                        min-height: auto !important;
                    }
                }
            }
            
            #transportation-details-tooltip > div:last-child {
                padding: 15px !important;
                line-height: 1.4 !important;
                cursor: pointer !important;
                max-height: calc(80vh - 80px) !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                touch-action: pan-y !important;
            }
            
            /* 權狀坪數浮框專用樣式 */
            #area-details-tooltip {
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                width: 90vw !important;
                max-width: 400px !important;
                max-height: 80vh !important;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
                border: 2px solid #667eea !important;
                border-radius: 15px !important;
                box-shadow: 0 20px 40px rgba(0,0,0,0.25) !important;
                z-index: 10001 !important;
                overflow: hidden !important;
                font-size: 0.9rem !important;
            }
            
            #area-details-tooltip > div:last-child {
                padding: 15px !important;
                line-height: 1.4 !important;
                cursor: pointer !important;
                max-height: calc(80vh - 80px) !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                touch-action: pan-y !important;
            }
            
            .modal > div {
                width: 98vw !important;
                max-width: none !important;
                height: 90vh !important;
                max-height: 90vh !important;
                display: flex !important;
                flex-direction: column !important;
            }
        }
        
        /* 客戶見證動畫 */
        @keyframes float {
            0% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(10px) translateY(-10px); }
            50% { transform: translateX(-5px) translateY(5px); }
            75% { transform: translateX(-10px) translateY(-5px); }
            100% { transform: translateX(0) translateY(0); }
        }
        
        /* 房產資訊下拉選單hover效果 */
        #propertyInfoMenu a:hover {
            background: linear-gradient(135deg, #667eea, #764ba2) !important;
            color: white !important;
            transform: translateX(5px);
        }
        
        #propertyInfoDropdown:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4) !important;
        }

        /* 貸款試算彈窗樣式 */
        .loan-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        
        .loan-modal-content {
            background-color: #fefefe;
            margin: 2% auto;
            padding: 0;
            border-radius: 12px;
            width: 95%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .loan-modal-header {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 12px 12px 0 0;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .loan-modal-title {
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .loan-modal-close {
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            line-height: 1;
            padding: 0.2rem;
        }
        
        .loan-modal-close:hover {
            transform: scale(1.1);
        }
        
        .loan-modal-body {
            padding: 1rem;
            flex: 1;
            overflow-y: auto;
            max-height: calc(90vh - 80px);
            min-height: 500px;
            scrollbar-width: thin;
            scrollbar-color: #10b981 #f1f5f9;
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }
        
        .loan-modal-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
        }
        
        .loan-input-section {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 1rem;
        }
        
        .loan-result-section {
            background: #ffffff;
            border-radius: 6px;
            padding: 0.6rem;
        }
        
        .loan-input-group {
            margin-bottom: 0.6rem;
        }
        
        .loan-input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.2rem;
            color: #374151;
            font-size: 0.8rem;
        }
        
        .loan-input {
            width: 100%;
            padding: 0.4rem;
            border: 2px solid #e5e7eb;
            border-radius: 5px;
            font-size: 0.85rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        
        .loan-input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        .loan-slider {
            width: 100%;
            margin: 0.4rem 0;
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            border-radius: 2px;
            background: #e5e7eb;
            outline: none;
            cursor: pointer;
        }
        
        .loan-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 1px 4px rgba(0,0,0,0.15);
        }
        
        .loan-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 1px 4px rgba(0,0,0,0.15);
        }
        
        .loan-slider-value {
            text-align: center;
            font-weight: bold;
            color: #10b981;
            font-size: 0.8rem;
            margin-top: 0.1rem;
        }
        
        .loan-input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.8rem;
        }
        
        .loan-result-card {
            background: white;
            border-radius: 6px;
            padding: 0.8rem;
            margin-bottom: 0.6rem;
            border-left: 3px solid #10b981;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        .loan-result-title {
            font-weight: bold;
            color: #10b981;
            margin-bottom: 0.6rem;
            font-size: 0.9rem;
        }
        
        .loan-result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.3rem;
            font-size: 0.8rem;
        }
        
        .loan-result-highlight {
            background: linear-gradient(135deg, #10b981, #3b82f6);
            color: white;
            border-radius: 6px;
            padding: 0.4rem 0.8rem;
            text-align: center;
            margin-top: 0.6rem;
        }
        
        .loan-result-highlight h3 {
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
        }
        
        .loan-result-highlight .amount {
            font-size: 1.3rem;
            font-weight: bold;
            margin: 0.1rem 0;
        }

        /* 觸控優化 */
        @media (hover: none) and (pointer: coarse) {
            .photo-item:hover,
            .filter-button:hover,
            .pagination button:hover {
                transform: none !important;
            }
            
            .photo-item:active {
                transform: scale(0.95) !important;
            }
            
            .filter-button:active {
                transform: scale(0.98) !important;
            }
        }
        
        /* 貸款試算手機版優化 */
        @media (max-width: 768px) {
            .loan-modal-content {
                margin: 3% auto;
                width: 95%;
                max-width: 750px;
                max-height: 90vh;
            }
            
            .loan-modal-header {
                padding: 0.8rem 1rem;
            }
            
            .loan-modal-title {
                font-size: 1.3rem;
            }
            
            .loan-input-label {
                font-size: 1.0rem;
            }
            
            .loan-input {
                font-size: 1.0rem;
            }
            
            .loan-slider-value {
                font-size: 1.2rem;
            }
            
            .loan-result-title {
                font-size: 1.1rem;
            }
            
            .loan-result-grid {
                font-size: 1.2rem;
            }
            
            .loan-result-highlight h3 {
                font-size: 1.1rem;
            }
            
            .loan-result-highlight .amount {
                font-size: 1.7rem;
            }
            
            /* 貸款試算輸入行響應式設計 */
            .loan-input-row {
                grid-template-columns: 1fr !important;
                gap: 0.8rem !important;
            }
            
            /* 貸款試算結果行響應式設計 */
            .loan-result-row {
                grid-template-columns: 1fr !important;
                gap: 0.6rem !important;
            }
        }
        
        @media (max-width: 480px) {
            .loan-modal-content {
                margin: 1% auto;
                width: 98%;
                max-height: 98vh;
                border-radius: 8px;
            }
            
            .loan-modal-header {
                padding: 0.5rem 0.8rem;
            }
            
            .loan-modal-title {
                font-size: 1.1rem;
            }
            
            /* 超小螢幕優化 */
            .loan-input-group {
                margin-bottom: 0.4rem;
            }
            
            .loan-input-label {
                font-size: 1.0rem;
            }
            
            .loan-input {
                padding: 0.4rem;
                font-size: 1.0rem;
            }
            
            .loan-slider {
                margin: 0.3rem 0;
            }
            
            .loan-slider-value {
                font-size: 1.1rem;
            }
            
            .loan-result-title {
                font-size: 1.1rem;
            }
            
            .loan-result-grid {
                font-size: 1.2rem;
            }
            
            .loan-result-highlight h3 {
                font-size: 1.1rem;
            }
            
            .loan-result-highlight .amount {
                font-size: 1.7rem;
            }
        }
        
        /* 橫向模式優化 */
        @media (max-width: 768px) and (orientation: landscape) {
            .header {
                padding: 0.5rem !important;
            }
            
            .header h1 {
                font-size: 1rem !important;
                margin: 0 !important;
            }
            
            .header p {
                font-size: 0.8rem !important;
                margin: 0.2rem 0 !important;
            }
            
            .search-filter-container {
                margin: 0.5rem 0 !important;
            }
            
            .properties-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.8rem !important;
            }
        }
        
        /* 大螢幕橫向模式 3 欄佈局 */
        @media (min-width: 1200px) and (orientation: landscape) {
            .properties-grid {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 2.5rem !important;
                max-width: 1600px !important;
                padding: 0 2rem !important;
            }
            
            .property-card {
                padding: 0.6rem !important;
            }
            
            .photo-item {
                width: 65px !important;
                height: 49px !important;
            }
        }

        /* 物件狀態標籤樣式 */
        .property-status-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            animation: pulse-glow 2s ease-in-out infinite;
            transform-origin: center;
        }

        .status-urgent {
            background: linear-gradient(45deg, #ff4757, #ff3838);
            animation: urgent-pulse 1.5s ease-in-out infinite;
        }

        .status-selling {
            background: linear-gradient(45deg, #ffa502, #ff6348);
            animation: selling-pulse 2s ease-in-out infinite;
        }

        .status-negotiating {
            background: linear-gradient(45deg, #3742fa, #2f3542);
            animation: negotiating-pulse 2.5s ease-in-out infinite;
        }

        .status-below-appraisal {
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            animation: below-appraisal-pulse 2.2s ease-in-out infinite;
        }

        .status-about-to-sell {
            background: linear-gradient(45deg, #f87171, #dc2626);
            animation: about-to-sell-pulse 1.8s ease-in-out infinite;
        }

        /* 動畫效果 */
        @keyframes urgent-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 2px 8px rgba(255, 71, 87, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 4px 16px rgba(255, 71, 87, 0.6);
            }
        }

        @keyframes selling-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 2px 8px rgba(255, 165, 2, 0.4);
            }
            50% {
                transform: scale(1.03);
                box-shadow: 0 3px 12px rgba(255, 165, 2, 0.6);
            }
        }

        @keyframes negotiating-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 2px 8px rgba(55, 66, 250, 0.4);
            }
            50% {
                transform: scale(1.02);
                box-shadow: 0 3px 10px rgba(55, 66, 250, 0.5);
            }
        }

        @keyframes below-appraisal-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
            }
            50% {
                transform: scale(1.03);
                box-shadow: 0 3px 12px rgba(59, 130, 246, 0.6);
            }
        }

        @keyframes about-to-sell-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 2px 8px rgba(248, 113, 113, 0.4);
            }
            50% {
                transform: scale(1.04);
                box-shadow: 0 3px 12px rgba(248, 113, 113, 0.6);
            }
        }

        @keyframes pulse-glow {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
        }

        /* 確保物件卡片有相對定位 */
        .property-card {
            position: relative;
        }

        /* 彈窗中的狀態標籤樣式 */
        .modal-status-tag {
            position: absolute;
            top: 15px;
            right: 60px;
            z-index: 10001;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            animation: modal-pulse-glow 2s ease-in-out infinite;
            transform-origin: center;
        }

        .modal-status-urgent {
            background: linear-gradient(45deg, #ff4757, #ff3838);
            animation: modal-urgent-pulse 1.5s ease-in-out infinite;
        }

        .modal-status-selling {
            background: linear-gradient(45deg, #ffa502, #ff6348);
            animation: modal-selling-pulse 2s ease-in-out infinite;
        }

        .modal-status-negotiating {
            background: linear-gradient(45deg, #3742fa, #2f3542);
            animation: modal-negotiating-pulse 2.5s ease-in-out infinite;
        }

        .modal-status-below-appraisal {
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            animation: modal-below-appraisal-pulse 2.2s ease-in-out infinite;
        }

        .modal-status-about-to-sell {
            background: linear-gradient(45deg, #f87171, #dc2626);
            animation: modal-about-to-sell-pulse 1.8s ease-in-out infinite;
        }

        /* 彈窗動畫效果 */
        @keyframes modal-urgent-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 3px 10px rgba(255, 71, 87, 0.5);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 5px 20px rgba(255, 71, 87, 0.7);
            }
        }

        @keyframes modal-selling-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 3px 10px rgba(255, 165, 2, 0.5);
            }
            50% {
                transform: scale(1.03);
                box-shadow: 0 4px 15px rgba(255, 165, 2, 0.7);
            }
        }

        @keyframes modal-negotiating-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 3px 10px rgba(55, 66, 250, 0.5);
            }
            50% {
                transform: scale(1.02);
                box-shadow: 0 4px 12px rgba(55, 66, 250, 0.6);
            }
        }

        @keyframes modal-below-appraisal-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 3px 10px rgba(59, 130, 246, 0.5);
            }
            50% {
                transform: scale(1.03);
                box-shadow: 0 4px 15px rgba(59, 130, 246, 0.7);
            }
        }

        @keyframes modal-about-to-sell-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 3px 10px rgba(248, 113, 113, 0.5);
            }
            50% {
                transform: scale(1.04);
                box-shadow: 0 4px 15px rgba(248, 113, 113, 0.7);
            }
        }

        @keyframes modal-pulse-glow {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.9;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                <img src="https://joinus.hbhousing.com.tw/assets/images/logo.5aacccab.png" alt="住商不動產" style="height: 1.2em; width: auto; vertical-align: middle;">
                住商不動產-楊梅大順店
            </h1>
            <p>精選物件 | 低於銀行鑑價 | 預約從速</p>
        </header>
        
        
        <section class="properties-section">
            <div style="text-align: center; margin: 0.3rem 0 0.8rem 0;">
                <h2 style="font-size: 1.6rem; color: #2c3e50; padding: 0.4rem 0.8rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2); text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); position: relative; overflow: hidden; display: inline-block; margin: 0;">濬瑒、子菲精選物件</h2>
            </div>
            
            <!-- 搜尋和篩選區域 -->
            <div class="search-filter-container" style="text-align: center; margin: 1rem 0 2rem 0;">
                <!-- 搜尋框 -->
                <div style="margin-bottom: 1rem;">
                    <input type="text" id="property-search" placeholder="搜尋物件名稱、地址、社區..." 
                           style="width: 300px; max-width: 90%; padding: 0.8rem 1rem; border: 2px solid #e9ecef; border-radius: 25px; font-size: 1rem; outline: none; transition: all 0.3s ease;"
                           onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102, 126, 234, 0.1)'"
                           onblur="this.style.borderColor='#e9ecef'; this.style.boxShadow='none'">
                </div>
                
                <!-- 篩選按鈕 -->
                <div class="filter-buttons">
                    <button class="filter-button active" data-filter="all" style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 0.8rem 2rem; border-radius: 20px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
                        🏠 全部物件
                    </button>
                    <button class="filter-button" data-filter="2房" style="background: transparent; color: #666; border: none; padding: 0.8rem 2rem; border-radius: 20px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                        🏠 2房物件
                    </button>
                    <button class="filter-button" data-filter="3房" style="background: transparent; color: #666; border: none; padding: 0.8rem 2rem; border-radius: 20px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                        🏢 3房物件
                    </button>
                    <button class="filter-button" data-filter="4房" style="background: transparent; color: #666; border: none; padding: 0.8rem 2rem; border-radius: 20px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                        🏘️ 4房物件
                    </button>
                </div>
            </div>
            
            <!-- 統計資訊 -->
            <div id="stats-container"></div>
            
            <!-- 動態物件容器 -->
            <div id="properties-container" class="properties-grid">
                <!-- 物件將由 JavaScript 動態載入 -->
            </div>
            
            <!-- 分頁導航 -->
            <div id="pagination-container"></div>
        </section>
        
        
        <!-- 相關資料連結 -->
        <section style="background: #f8f9fa; padding: 1.2rem 0; margin: 1rem 0; text-align: center;">
            <h2 style="color: #2c3e50; margin-bottom: 0.8rem;">📎 相關資料連結</h2>
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.8rem; max-width: 1000px; margin: 0 auto;">
                <a href="https://realtor.houseprice.tw/agent/buy/0925666597/" class="contact-button" target="_blank" style="background: linear-gradient(45deg, #2ecc71, #27ae60); color: white; padding: 0.6rem 1.2rem; border-radius: 20px; text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; gap: 0.4rem; transition: all 0.3s ease; box-shadow: 0 3px 12px rgba(46, 204, 113, 0.3); min-width: 180px; text-align: center; justify-content: center; font-size: 0.9rem;">🏠 更多物件資料</a>
                <a href="https://www.tiktok.com/@aihouse168" class="contact-button" target="_blank" style="background: linear-gradient(45deg, #000000, #333333); color: white; padding: 0.6rem 1.2rem; border-radius: 20px; text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; gap: 0.4rem; transition: all 0.3s ease; box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3); min-width: 180px; text-align: center; justify-content: center; font-size: 0.9rem;">🎵 TikTok短影音</a>
                
                <!-- 房產資訊參考下拉選單 -->
                <div style="position: relative; display: inline-block;">
                    <button id="propertyInfoDropdown" style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; padding: 0.6rem 1.2rem; border-radius: 20px; border: none; font-weight: bold; display: inline-flex; align-items: center; gap: 0.4rem; transition: all 0.3s ease; box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3); min-width: 180px; text-align: center; justify-content: center; font-size: 0.9rem; cursor: pointer;">
                        📊 房產資訊參考 <span style="font-size: 0.8rem;">▼</span>
                    </button>
                    <div id="propertyInfoMenu" style="position: absolute; top: 100%; left: 0; background: white; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); min-width: 250px; z-index: 1000; display: none; margin-top: 0.5rem; overflow: hidden;">
                        <a href="https://drive.google.com/file/d/1NddGgXcysK-QRoozRA4XXww6c-NUv-OJ/view?usp=drive_link" target="_blank" style="display: block; padding: 0.8rem 1rem; color: #2c3e50; text-decoration: none; border-bottom: 1px solid #f0f0f0; transition: all 0.3s ease; font-size: 0.9rem;">
                            📈 楊梅優勢簡報
                        </a>
                        <a href="https://drive.google.com/file/d/1PeGDx2IruOjWkeIHgVVqpk0tceB0l7Vg/view?usp=drive_link" target="_blank" style="display: block; padding: 0.8rem 1rem; color: #2c3e50; text-decoration: none; border-bottom: 1px solid #f0f0f0; transition: all 0.3s ease; font-size: 0.9rem;">
                            🏦 新青安寬鬆政策
                        </a>
                        <a href="https://drive.google.com/file/d/1vVluYlY81Ew76Dc4ZyWI_Y9CZ3cWbj0t/view?usp=drive_link" target="_blank" style="display: block; padding: 0.8rem 1rem; color: #2c3e50; text-decoration: none; transition: all 0.3s ease; font-size: 0.9rem;">
                            📊 2025年房產分析
                        </a>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 客戶見證 -->
        <section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.2rem 0.8rem; margin: 0.8rem 0; position: relative; overflow: hidden;">
            <!-- 背景裝飾 -->
            <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: url('data:image/svg+xml,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 100 100&quot;><circle cx=&quot;20&quot; cy=&quot;20&quot; r=&quot;2&quot; fill=&quot;rgba(255,255,255,0.1)&quot;/><circle cx=&quot;80&quot; cy=&quot;80&quot; r=&quot;1&quot; fill=&quot;rgba(255,255,255,0.1)&quot;/><circle cx=&quot;60&quot; cy=&quot;30&quot; r=&quot;1.5&quot; fill=&quot;rgba(255,255,255,0.1)&quot;/></svg>') repeat; animation: float 20s infinite linear;"></div>
            
            <h2 style="text-align: center; margin-bottom: 1.2rem; color: white; font-size: 1.4rem; font-weight: 800; text-shadow: 0 2px 4px rgba(0,0,0,0.3); position: relative; z-index: 2;">💬 客戶見證</h2>
            
            <div style="max-width: 800px; margin: 0 auto; position: relative; z-index: 2;">
                <div id="testimonialSlides" style="display: flex; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);">
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「洽談透明、節奏流暢，從估價到交屋都超放心！」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 陳先生（屋主）</p>
                    </div>
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「實地看屋安排有效率，重點介紹到位，沒有話術。」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 吳小姐（買方）</p>
                    </div>
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「文件與流程超專業，價格談成比預期更好！」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 葉先生（買方）</p>
                    </div>
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「劉小姐服務超專業，從看屋到成交都很細心！」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 林太太（買方）</p>
                    </div>
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「蔡先生很誠實，不會亂推銷，價格也很合理。」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 王先生（屋主）</p>
                    </div>
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「服務態度很好，專業度也很高，推薦給需要買房的朋友！」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 張小姐（買方）</p>
                    </div>
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「從看屋到簽約，整個流程都很順暢，非常滿意！」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 李太太（買方）</p>
                    </div>
                    <div class="testimonial-slide" style="min-width: 100%; padding: 1.4rem; text-align: center; background: rgba(255,255,255,0.95); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); backdrop-filter: blur(10px);">
                        <div style="color: #ffd700; font-size: 1.3rem; margin-bottom: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">⭐⭐⭐⭐⭐</div>
                        <p style="font-size: 0.95rem; color: #2c3e50; margin-bottom: 1rem; line-height: 1.5; font-weight: 500;">「賣房過程很順利，價格也達到預期，非常推薦！」</p>
                        <p style="color: #7f8c8d; font-weight: 600; font-size: 0.85rem;">— 林先生（屋主）</p>
                    </div>
                </div>
                <div style="display: flex; gap: 0.6rem; justify-content: center; margin-top: 1.2rem;">
                    <button id="testimonialPrev" style="background: linear-gradient(45deg, #ff6b6b, #ee5a52); color: white; border: none; padding: 0.5rem 1rem; border-radius: 18px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 2px 10px rgba(255,107,107,0.3);">‹ 上一則</button>
                    <button id="testimonialNext" style="background: linear-gradient(45deg, #4ecdc4, #44a08d); color: white; border: none; padding: 0.5rem 1rem; border-radius: 18px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 2px 10px rgba(78,205,196,0.3);">下一則 ›</button>
                </div>
            </div>
        </section>
        
        <!-- 聯絡方式 -->
        <section style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 1.5rem 0.8rem; margin: 1rem 0; position: relative;">
            <h2 style="text-align: center; margin-bottom: 1.5rem; color: #2c3e50; font-size: 1.6rem; font-weight: 800; position: relative;">
                <span style="background: linear-gradient(45deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">📞 聯絡方式</span>
            </h2>
            <div class="contact-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.8rem; max-width: 1000px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); padding: 1.8rem; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); border: 1px solid rgba(102, 126, 234, 0.1); position: relative; overflow: hidden; display: flex; flex-direction: column; height: 100%;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #667eea, #764ba2);"></div>
                    <h3 style="color: #2c3e50; margin-bottom: 1.2rem; font-size: 1.2rem; font-weight: 700; display: flex; align-items: center; gap: 0.4rem;">
                        <span style="background: linear-gradient(45deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">👥 聯絡方式</span>
                    </h3>
                    <div style="flex: 1;">
                        <p style="margin-bottom: 0.8rem; font-size: 1rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.6rem; background: rgba(102, 126, 234, 0.05); border-radius: 8px; border-left: 3px solid #667eea;">
                            <i class="bi bi-person-fill" style="color: #667eea; font-size: 1.1rem;"></i>
                            <span style="font-weight: 600;">劉子菲</span>
                            <a href="tel:0925666597" style="color: #e74c3c; text-decoration: none; font-weight: bold; margin-left: auto; display: flex; align-items: center; gap: 0.25rem;">
                                <i class="bi bi-phone-fill"></i> 0925-666-597
                            </a>
                        </p>
                        <p style="margin-bottom: 0.8rem; font-size: 1rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.6rem; background: rgba(102, 126, 234, 0.05); border-radius: 8px; border-left: 3px solid #667eea;">
                            <i class="bi bi-person-fill" style="color: #667eea; font-size: 1.1rem;"></i>
                            <span style="font-weight: 600;">蔡濬瑒</span>
                            <a href="tel:0928776755" style="color: #e74c3c; text-decoration: none; font-weight: bold; margin-left: auto; display: flex; align-items: center; gap: 0.25rem;">
                                <i class="bi bi-phone-fill"></i> 0928-776-755
                            </a>
                        </p>
                        <p style="margin-bottom: 1.2rem; font-size: 1rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.6rem; background: rgba(0, 200, 81, 0.05); border-radius: 8px; border-left: 3px solid #00c851;">
                            <i class="bi bi-chat-dots-fill" style="color: #00c851; font-size: 1.1rem;"></i>
                            <span style="font-weight: 600;">LINE：@931aeinu</span>
                            <button id="copyLineId" style="background: linear-gradient(45deg, #00c851, #00a085); color: white; border: none; padding: 0.3rem 0.7rem; border-radius: 12px; cursor: pointer; font-size: 0.8rem; margin-left: auto; transition: all 0.3s ease;" title="複製 LINE ID">
                                <i class="bi bi-copy"></i> 複製
                            </button>
                        </p>
                    </div>
                    <div style="display: flex; gap: 0.8rem; flex-wrap: wrap; margin-top: auto; padding-top: 1rem;">
                        <a href="tel:0928776755" style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 20px; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 0.4rem; transition: all 0.3s ease; box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3); flex: 1; justify-content: center; font-size: 0.85rem;">
                            <i class="bi bi-telephone-outbound-fill"></i> 立即來電
                        </a>
                        <a href="https://lin.ee/Lax7jMka" target="_blank" style="background: linear-gradient(45deg, #00c851, #00a085); color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 20px; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 0.4rem; transition: all 0.3s ease; box-shadow: 0 3px 12px rgba(0, 200, 81, 0.3); flex: 1; justify-content: center; font-size: 0.85rem;">
                            <i class="fa-brands fa-line"></i> LINE聯絡
                        </a>
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); padding: 1.8rem; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); border: 1px solid rgba(102, 126, 234, 0.1); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #667eea, #764ba2);"></div>
                    <h3 style="color: #2c3e50; margin-bottom: 1.2rem; font-size: 1.2rem; font-weight: 700; display: flex; align-items: center; gap: 0.4rem;">
                        <span style="background: linear-gradient(45deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">🏢 經紀業資訊</span>
                    </h3>
                    <div>
                        <p style="margin-bottom: 0.6rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.5rem; background: rgba(102, 126, 234, 0.05); border-radius: 6px;">
                            <i class="bi bi-buildings" style="color: #667eea; font-size: 1rem;"></i>
                            <span style="font-weight: 600;">公司：常鴻悦豐企業社</span>
                        </p>
                        <p style="margin-bottom: 0.6rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.5rem; background: rgba(102, 126, 234, 0.05); border-radius: 6px;">
                            <i class="bi bi-person-badge-fill" style="color: #667eea; font-size: 1rem;"></i>
                            <span style="font-weight: 600;">營業員：蔡文豪（112）桃市字第432900號</span>
                        </p>
                        <p style="margin-bottom: 0.6rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.5rem; background: rgba(102, 126, 234, 0.05); border-radius: 6px;">
                            <i class="bi bi-person-badge-fill" style="color: #667eea; font-size: 1rem;"></i>
                            <span style="font-weight: 600;">營業員：劉子菲（113）桃市字第467056號</span>
                        </p>
                        <p style="margin-bottom: 0.6rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.5rem; background: rgba(102, 126, 234, 0.05); border-radius: 6px;">
                            <i class="bi bi-person-vcard-fill" style="color: #667eea; font-size: 1rem;"></i>
                            <span style="font-weight: 600;">經紀人：葉靜蓉（104）新北經證字第003119號</span>
                        </p>
                        <p style="margin-bottom: 0.6rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.5rem; background: rgba(102, 126, 234, 0.05); border-radius: 6px;">
                            <i class="bi bi-geo-alt-fill" style="color: #667eea; font-size: 1rem;"></i>
                            <span style="font-weight: 600;">服務據點：住商不動產楊梅大順店</span>
                        </p>
                        <p style="margin-bottom: 0.6rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.6rem; padding: 0.5rem; background: rgba(102, 126, 234, 0.05); border-radius: 6px;">
                            <i class="bi bi-clock-fill" style="color: #667eea; font-size: 1rem;"></i>
                            <span style="font-weight: 600;">營業時間：09:00–21:00</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <!-- 貸款試算彈窗 -->
    <div id="loanModal" class="loan-modal">
        <div class="loan-modal-content">
            <div class="loan-modal-header">
                <div class="loan-modal-title">
                    <span style="margin-right: 8px;">🧮</span>
                    買方費用估算
                </div>
                <span class="loan-modal-close" onclick="closeLoanModal()">&times;</span>
            </div>
            <div class="loan-modal-body">
                <div class="loan-modal-grid">
                    <!-- 輸入區域 -->
                    <div class="loan-input-section">
                        <h3 style="color: #10b981; font-weight: bold; margin-bottom: 0.8rem; font-size: 0.9rem;">📝 輸入參數</h3>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">房屋總價 (萬元)</label>
                            <input type="number" id="modalHousePrice" class="loan-input" placeholder="例如：896" value="896">
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">貸款成數 (%)</label>
                            <input type="range" id="modalLoanRatio" min="40" max="85" value="80" class="loan-slider">
                            <div class="loan-slider-value" id="modalLoanRatioValue">80%</div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">貸款年限 (年)</label>
                            <input type="range" id="modalLoanYears" min="0" max="40" value="40" class="loan-slider">
                            <div class="loan-slider-value" id="modalLoanYearsValue">40年</div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">貸款利率 (%)</label>
                            <input type="range" id="modalInterestRate" min="0.5" max="5" step="0.1" value="2.1" class="loan-slider">
                            <div class="loan-slider-value" id="modalInterestRateValue">2.1%</div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">名下有無其他房貸</label>
                            <select id="modalExistingLoan" class="loan-input" onchange="adjustLoanConditions()">
                                <option value="none">無其他房貸 (首購)</option>
                                <option value="existing">有其他房貸 (第二戶)</option>
                                <option value="youth">新青安貸款 (限1000萬)</option>
                            </select>
                        </div>
                        
                        <div class="loan-input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; margin-bottom: 0.8rem;">
                            <div class="loan-input-group">
                                <label class="loan-input-label">寬限期 (年)</label>
                                <select id="modalGracePeriod" class="loan-input">
                                    <option value="0">無寬限期</option>
                                    <option value="1">1年</option>
                                    <option value="2">2年</option>
                                    <option value="3">3年</option>
                                    <option value="5" selected>新青安 5年</option>
                                </select>
                            </div>
                            
                            <div class="loan-input-group">
                                <label class="loan-input-label">還款方式</label>
                                <select id="modalRepaymentType" class="loan-input">
                                    <option value="equal_payment">等額本息</option>
                                    <option value="equal_principal">等額本金</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="loan-input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; margin-bottom: 0.8rem;">
                            <div class="loan-input-group">
                                <label class="loan-input-label">代書費+契稅 (元)</label>
                                <input type="number" id="modalServiceFee" class="loan-input" placeholder="100000" value="100000">
                            </div>
                            
                            <div class="loan-input-group">
                                <label class="loan-input-label">代書潤筆費 (元)</label>
                                <input type="number" id="modalNotaryFee" class="loan-input" placeholder="2000" value="2000">
                            </div>
                        </div>
                        
                        <div class="loan-input-group">
                            <label class="loan-input-label">仲介費 (%)</label>
                            <input type="range" id="modalAgentFee" min="0" max="2" step="0.1" value="2" class="loan-slider">
                            <div class="loan-slider-value" id="modalAgentFeeValue">2%</div>
                        </div>
                        
                        <div class="loan-input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; margin-bottom: 0.8rem;">
                            <div class="loan-input-group">
                                <label class="loan-input-label">月收入 (萬元)</label>
                                <input type="number" id="modalMonthlyIncome" class="loan-input" placeholder="例如：8" value="8">
                            </div>
                            
                            <div class="loan-input-group">
                                <label class="loan-input-label">其他月支出 (萬元)</label>
                                <input type="number" id="modalOtherExpenses" class="loan-input" placeholder="例如：2" value="2">
                            </div>
                        </div>
                        
                        <div class="loan-input-group">
                            <div style="text-align: center; color: #10b981; font-size: 0.8rem; font-weight: 500;">
                                💡 所有參數即時計算，無需點擊按鈕
                            </div>
                        </div>
                    </div>
                    
                    <!-- 結果區域 -->
                    <div class="loan-result-section">
                        <h3 style="color: #10b981; font-weight: bold; margin-bottom: 0.8rem; font-size: 0.9rem;">📊 計算結果</h3>
                        <div id="modalLoanResults">
                            <div class="text-center text-gray-500 py-4">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">📊</div>
                                <p style="font-size: 0.75rem;">請輸入房屋價格開始計算</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script>
        // 自動調整標題字體大小避免換行
        function adjustTitleFontSize() {
            const titles = document.querySelectorAll('.property-title');
            const screenWidth = window.innerWidth;
            
            titles.forEach(title => {
                // 根據螢幕尺寸設定不同的初始字體大小
                let fontSize;
                if (screenWidth <= 480) {
                    fontSize = 0.85; // 超小螢幕
                } else if (screenWidth <= 768) {
                    fontSize = 0.9; // 手機
                } else if (screenWidth <= 1024) {
                    fontSize = 0.9; // 平板
                } else {
                    fontSize = 0.95; // 桌面
                }
                
                title.style.fontSize = fontSize + 'rem';
                
                // 檢查是否需要調整字體大小
                const minFontSize = screenWidth <= 480 ? 0.65 : 0.7;
                while (title.scrollWidth > title.clientWidth && fontSize > minFontSize) {
                    fontSize -= 0.05;
                    title.style.fontSize = fontSize + 'rem';
                }
            });
        }
        
        // 監聽視窗大小變化
        window.addEventListener('resize', () => {
            setTimeout(() => {
                adjustTitleFontSize();
            }, 100);
        });

        // 優化的物件資料結構
        const embeddedPropertiesData = {
            properties: [
                {
                    id: "prop_001",
                    title: "低自備 | 近龍科 | 2房+車位",
                    number: "2-1",
                    type: "2房",
                    address: "楊梅區梅獅路二段232巷***號10樓",
                    price: "896萬",
                    total_area: "40.08坪",
                    main_area: "18.17坪",
                    status: "below-appraisal",
                    statusText: "低於鑑價",
                    layout: "2房2廳1衛",
                    age: "11年",
                    floor: "10/14樓",
                    parking_space: "B3-14",
                    parking_type: "平面車位",
                    current_status: "空屋",
                    management_fee: "2,077元/月",
                    orientation: "座北朝南",
                    auxiliary_area: "1.63坪",
                    common_area: "9.07坪",
                    land_area: "5.22坪",
                    images: [
                        "images/2-1/客廳.jpg",
                        "images/2-1/客廳視角2.jpg",
                        "images/2-1/客廳視角3.jpg",
                        "images/2-1/客廳視角4.jpg",
                        "images/2-1/玄關.jpg",
                        "images/2-1/主臥房.jpg",
                        "images/2-1/主臥房2.jpg",
                        "images/2-1/次臥房.jpg",
                        "images/2-1/衛浴.jpg",
                        "images/2-1/陽台照片.jpg",
                        "images/2-1/陽台照片2.jpg",
                        "images/2-1/格局圖.png"
                    ],
                    transportation: {
                        facilities: [
                            "梅獅路商圈",
                            "龍潭科學園區",
                            "全聯福利中心",
                            "7-ELEVEN",
                            "萊爾富"
                        ],
                        transport: [
                            "台1線",
                            "縣道115號",
                            "楊梅交流道",
                            "埔心火車站",
                            "公車站牌"
                        ],
                        schools: [
                            "陽光國小",
                            "瑞塘國小",
                            "瑞坪國中"
                        ],
                        market: "萬大市場",
                        park: "四維公園"
                    },
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758635508112!6m8!1m7!1sTcuziJwB6dHCbFzTFsQVIw!2m2!1d24.90580115978875!2d121.1774002660474!3f281.776500634199!4f24.362884434893175!5f0.7820865974627469"
                },
                {
                    id: "prop_002", 
                    title: "金山特區 | 學區宅 | 景觀2房車",
                    number: "2-2",
                    type: "2房",
                    address: "楊梅區金山街275巷***號9樓",
                    price: "1,098萬",
                    total_area: "38.18坪",
                    main_area: "17.76坪",
                    auxiliary_area: "2.25坪",
                    parking_area: "8.81坪",
                    common_area: "9.36坪",
                    layout: "2房2廳1衛",
                    age: "9年",
                    floor: "9/15樓",
                    completion_date: "104.09.25",
                    management_fee: "1,619元/月",
                    orientation: "座西北朝東南",
                    parking_space: "B2-219",
                    motorcycle_space: "B1-21",
                    current_status: "空屋,隨時可看",
                    features: [
                        "無限棟距採光一級棒",
                        "室內大空間，2間皆可雙人床",
                        "公設齊全管理費便宜",
                        "24小時警衛管理",
                        "一手屋主，屋況佳拎包即可入住"
                    ],
                    transportation: {
                        facilities: ["大成路商圈", "環東路商圈", "新農街商圈", "星巴克 Starbucks", "全聯福利中心", "天成醫院", "怡仁綜合醫院"],
                        transport: ["楊梅交流道", "幼獅交流道", "公車客運站", "楊梅火車站"],
                        schools: ["楊明國中", "楊明國小"],
                        market: "楊梅市場",
                        park: "楊明公園"
                    },
                    images: [
                        "images/2-2/客廳.jpg",
                        "images/2-2/客餐廳.jpg",
                        "images/2-2/主臥房.jpg",
                        "images/2-2/次臥房.jpg",
                        "images/2-2/廚房.jpg",
                        "images/2-2/衛浴.jpg",
                        "images/2-2/玄關.jpg",
                        "images/2-2/後陽台.jpg",
                        "images/2-2/臥房.jpg",
                        "images/2-2/格局圖.jpg"
                    ],
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758688097963!6m8!1m7!1snj-1uSnKMtwfnVydvXo9FQ!2m2!1d24.9114918783189!2d121.1619182235839!3f234.71523489037244!4f31.018190970994652!5f0.7820865974627469"
                },
                {
                    id: "prop_007",
                    title: "金山特區 | 智富城 | 2房+車位",
                    number: "2-3",
                    type: "2房",
                    community: "智富城",
                    address: "楊梅區金山街***號2樓",
                    price: "898萬",
                    total_area: "37.95坪",
                    main_area: "16.28坪",
                    auxiliary_area: "2.94坪",
                    parking_area: "9.71坪",
                    common_area: "9.01坪",
                    layout: "2房2廳1衛",
                    property_type: "大樓",
                    age: "10年",
                    floor: "2/15樓",
                    completion_date: "104.05.25",
                    management_fee: "1712元/月",
                    orientation: "座東北朝西南",
                    parking_space: "B3-28",
                    motorcycle_space: "B2-200",
                    current_status: "空屋，隨時可看",
                    features: [
                        "金山重劃區、生活機能優異",
                        "全室輕裝潢、拎包即可入住",
                        "屋主用心維護、屋況好"
                    ],
                    transportation: {
                        facilities: [
                            "環東路商圈",
                            "新農街商圈",
                            "全聯福利中心",
                            "天成醫院"
                        ],
                        transport: [
                            "台1線",
                            "縣道115號",
                            "楊梅交流道",
                            "楊梅火車站"
                        ],
                        schools: [
                            "楊明國中",
                            "楊明國小"
                        ],
                        market: "楊梅市場",
                        park: "楊明公園"
                    },
                    images: [
                        "images/2-3/客廳.jpg",
                        "images/2-3/LINE_NOTE_250905_1.jpg",
                        "images/2-3/LINE_NOTE_250905_2.jpg",
                        "images/2-3/LINE_NOTE_250905_3.jpg",
                        "images/2-3/LINE_NOTE_250905_4.jpg",
                        "images/2-3/LINE_NOTE_250905_5.jpg",
                        "images/2-3/LINE_NOTE_250905_6.jpg",
                        "images/2-3/LINE_NOTE_250905_7.jpg",
                        "images/2-3/格局圖.jpg"
                    ],
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758691089830!6m8!1m7!1sP56Wk_NO9UIBerDdjPnyxA!2m2!1d24.91170423384164!2d121.1620895174084!3f100.292941486072!4f19.12152018104112!5f0.7820865974627469"
                },
                {
                    id: "prop_008",
                    title: "絕美景觀稀有 | 2房+平車 | 近車站",
                    number: "2-4",
                    type: "2房",
                    address: "桃園市楊梅區楊新北路***號",
                    price: "1,230萬",
                    total_area: "38.94坪",
                    layout: "2房2廳1衛",
                    age: "5年",
                    floor: "10F/13F",
                    orientation: "坐西朝東",
                    community: "香梅一品",
                    unit_price: "31.59萬/坪",
                    monthly_payment: "月付27,939元",
                    current_status: "住宅",
                    building_type: "電梯大樓",
                    decoration_level: "簡易裝潢",
                    management_fee: "2188元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "洽業務",
                    public_ratio: "46%",
                    main_area: "18.4坪",
                    ancillary_area: "2.59坪",
                    land_area: "6.24坪",
                    common_area: "17.95坪",
                    amenities: [
                        "近便利商店",
                        "近傳統市場", 
                        "近公園綠地",
                        "近學校",
                        "近醫療機構",
                        "近夜市"
                    ],
                    transportation: {
                        facilities: ["楊新北路商圈", "楊梅市場", "全聯福利中心"],
                        transport: ["楊新北路93巷公車站", "楊梅火車站"],
                        schools: ["楊明國中", "楊明國小"],
                        market: "楊梅市場",
                        park: "楊明公園"
                    },
                    features: [
                        "社區規劃健身房,圖書室、咖啡廳、羽球室、媽媽教室、瑜珈教室、撞球室及桌球室等",
                        "制震工法,戴雲發安全結構,採用ALFA SAFE柱中柱,耐震系統工法",
                        "邊間雙面採光,格局方正,獨立玄關,鞋櫃空間",
                        "衛浴有對外開窗,獨立洗手槽"
                    ],
                    images: [
                        "images/2-4/客廳.jpg",
                        "images/2-4/175837820303047104.jpg!400x300.jpg",
                        "images/2-4/175837820329382908.jpg!400x300.jpg",
                        "images/2-4/175837820334991101.jpg!400x300.jpg",
                        "images/2-4/175837820335129506.jpg!400x300.jpg",
                        "images/2-4/175837820348461909.jpg!400x300.jpg",
                        "images/2-4/175837820348814906.jpg!400x300.jpg",
                        "images/2-4/175837820362708209.jpg!400x300.jpg",
                        "images/2-4/175837820364224009.jpg!400x300.jpg",
                        "images/2-4/175837820375382503.jpg!400x300.jpg",
                        "images/2-4/175837820377061705.jpg!400x300.jpg"
                    ],
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758707348647!6m8!1m7!1s2xB3qAqPy16WzjofURaJBw!2m2!1d24.91340452511154!2d121.1530595497946!3f209.9799030169535!4f27.23396826839125!5f0.7820865974627469"
                },
                {
                    id: "prop_009",
                    title: "X計畫世紀城 | 2房+平車 | 近車站",
                    number: "2-5",
                    type: "2房",
                    community: "X計畫-世紀城",
                    address: "桃園市楊梅區金山街368巷***號",
                    price: "998萬",
                    total_area: "36.43坪",
                    main_area: "15.999坪",
                    layout: "2房1廳1衛",
                    age: "8年",
                    floor: "14F/15F",
                    orientation: "坐西南朝東北",
                    unit_price: "27.39萬/坪",
                    monthly_payment: "月付25,895元",
                    current_status: "住宅",
                    building_type: "電梯大樓",
                    decoration_level: "簡易裝潢",
                    management_fee: "1600元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位(9.589坪)",
                    parking_space: "洽業務",
                    parking_area: "9.589坪",
                    public_ratio: "32%",
                    ancillary_area: "2.289坪",
                    auxiliary_area: "2.289坪",
                    land_area: "4.791坪",
                    common_area: "8.557坪",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["金山街商圈", "楊梅觀光夜市", "新農商圈", "全聯福利中心", "楊梅市場"],
                        transport: ["楊梅火車站", "國道一號楊梅交流道", "楊新北路公車站"],
                        schools: ["楊明國小", "楊明國中", "楊梅高中"],
                        market: "楊梅觀光夜市",
                        park: "楊明公園"
                    },
                    features: [
                        "室內2+1房格局.溫馨裝潢,一卡皮箱可入住",
                        "雙陽台.房間皆開窗,通風好採光佳.屋況優",
                        "高樓層.使用天然瓦斯,附有大平面車位"
                    ],
                    images: [
                        "images/2-5/客廳.jpg",
                        "images/2-5/格局圖.jpeg",
                        "images/2-5/1.jpg",
                        "images/2-5/175515145904060006.jpg!400x300.jpg",
                        "images/2-5/175515145908339404.jpg!400x300.jpg",
                        "images/2-5/175515145938402500.jpg!400x300.jpg",
                        "images/2-5/175515145955434102.jpg!400x300.jpg",
                        "images/2-5/175515145971678109.jpg!400x300.jpg",
                        "images/2-5/175515145978652905.jpg!400x300.jpg",
                        "images/2-5/175515145990574407.jpg!400x300.jpg",
                        "images/2-5/175515145993691403.jpg!400x300.jpg"
                    ],
                    features: [
                        "新成屋",
                        "楊梅景觀大樓兩房車"
                    ],
                    description: "X計畫世紀城兩房車，全新裝潢，採光佳，交通便利。景觀兩房車，座西南朝東北，有電梯，平面車位。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758707580230!6m8!1m7!1s7LZSjlMNTSAfghbzIa7ejw!2m2!1d24.91239663360834!2d121.1626274308514!3f152.5463588641371!4f29.4261813964752!5f0.7820865974627469"
                },
                {
                    id: "prop_010",
                    title: "楊明雙學區 | 景觀2房車",
                    number: "2-6",
                    type: "2房",
                    community: "益欣學學",
                    address: "楊梅區新農街379巷***號12樓",
                    price: "1,188萬",
                    total_area: "41.34坪",
                    main_area: "18.35坪",
                    layout: "2房2廳1衛",
                    age: "8年",
                    floor: "12F/15F",
                    orientation: "座東南朝西北",
                    current_status: "自住,需提前約",
                    building_type: "大樓",
                    decoration_level: "有",
                    management_fee: "1778元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "B2-88",
                    public_ratio: "23%",
                    ancillary_area: "2.52坪",
                    auxiliary_area: "2.52坪",
                    parking_area: "10.88坪",
                    common_area: "9.59坪",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "B1-88",
                    completion_date: "106.05.09",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["環東路商圈", "新農街商圈", "全聯福利中心", "天成醫院", "怡仁綜合醫院"],
                        transport: ["台1線", "台31線", "縣道115號", "楊梅交流道", "楊梅火車站"],
                        schools: ["楊明國中", "楊明國小"],
                        market: "楊梅市場",
                        park: "楊明公園"
                    },
                    features: [
                        "漂亮樓層景觀好室內輕裝潢",
                        "二房大空間間間可放雙人床",
                        "衛浴開窗通風不怕潮濕",
                        "獨立大車位近電梯口旁",
                        "24H警衛管理安全可靠"
                    ],
                    images: [
                        "images/2-6/客廳.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_1.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_2.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_3.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_4.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_5.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_6.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_7.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_8.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_9.jpg",
                        "images/2-6/LINE_ALBUM_益欣學學二房車$1188萬（自住提前好約）_250703_10.jpg",
                        "images/2-6/格局圖.jpg"
                    ],
                    description: "楊明雙學區景觀2房車，漂亮樓層景觀好室內輕裝潢，二房大空間間間可放雙人床，衛浴開窗通風不怕潮濕，獨立大車位近電梯口旁，24H警衛管理安全可靠，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758714679582!6m8!1m7!1sBAjOv5UHgKO8-M8uhpatIw!2m2!1d24.91215959645058!2d121.156969386107!3f264.49259929294186!4f17.252121029408897!5f0.7820865974627469"
                },
                {
                    id: "prop_011",
                    title: "世紀美妝雙開三房車 | 學區宅",
                    number: "3-1",
                    type: "3房",
                    community: "世紀城",
                    address: "楊梅區金山街368巷***號14樓",
                    price: "1,298萬",
                    total_area: "47.51坪",
                    status: "about-to-sell",
                    statusText: "即將售出",
                    main_area: "22.97坪",
                    layout: "3房2廳2衛",
                    age: "7年",
                    floor: "14F/15F",
                    orientation: "座東北朝西南",
                    current_status: "空屋,隨時可看",
                    building_type: "大樓",
                    decoration_level: "全室美裝潢",
                    management_fee: "1,904元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "B2-162",
                    public_ratio: "32%",
                    ancillary_area: "2.5坪",
                    auxiliary_area: "2.5坪",
                    parking_area: "8.5坪",
                    common_area: "13.54坪",
                    completion_date: "106.08.02",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "B1-418",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["環東路商圈", "新農街商圈", "星巴克", "全聯福利中心", "楊梅觀光夜市"],
                        transport: ["楊梅交流道", "公車客運站", "楊梅區免費公車", "楊梅火車站"],
                        schools: ["楊明國中", "楊明國小", "大同國小"],
                    market: "楊梅市場",
                        park: "楊明公園"
                    },
                    features: [
                        "高樓層景觀戶、全室美裝潢",
                        "稀有衛浴開窗設計",
                        "前後雙陽台",
                        "天然瓦斯"
                    ],
                    images: [
                        "images/3-1/客廳.jpg",
                        "images/3-1/主臥.jpg",
                        "images/3-1/客廳1.jpg",
                        "images/3-1/客廳2.jpg",
                        "images/3-1/次臥房.jpg",
                        "images/3-1/次臥房2.jpg",
                        "images/3-1/次臥房3.jpg",
                        "images/3-1/廚房.jpg",
                        "images/3-1/廁所.jpg",
                        "images/3-1/衛浴1.jpg",
                        "images/3-1/陽台.jpg",
                        "images/3-1/格局圖.jpg"
                    ],
                    description: "世紀美妝雙開三房車，高樓層景觀戶全室美裝潢，稀有衛浴開窗設計，前後雙陽台，環東路新農街商圈，近楊明國中小學區，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758710686802!6m8!1m7!1s7LZSjlMNTSAfghbzIa7ejw!2m2!1d24.91239663360834!2d121.1626274308514!3f146.1238597931058!4f17.34832990737047!5f0.7820865974627469"
                },
                {
                    id: "prop_012",
                    title: "泳達首郡次頂樓3房車 | 近車站",
                    number: "3-2",
                    type: "3房",
                    community: "泳達首郡",
                    address: "楊梅區楊新北路***號11樓",
                    price: "1,298萬",
                    total_area: "52.68坪",
                    main_area: "23.85坪",
                    layout: "3房2廳2衛",
                    age: "10.3年",
                    floor: "11F/12F(次頂樓)",
                    orientation: "座西朝東向",
                    current_status: "空屋,隨時可看",
                    building_type: "大樓",
                    decoration_level: "有",
                    management_fee: "2,200元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "私有坡道平面車位",
                    parking_space: "洽業務",
                    public_ratio: "32%",
                    ancillary_area: "3.0坪",
                    auxiliary_area: "3.0坪",
                    parking_area: "12.0坪",
                    common_area: "13.83坪",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "有",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["交流道生活圈", "楊明公園"],
                        transport: ["楊梅車站", "交流道生活圈"],
                        schools: ["市立大同國小", "市立楊明國中"],
                        market: "市場",
                        park: "楊明公園"
                    },
                    features: [
                        "次頂樓景觀戶、稀有釋出",
                        "雙衛浴皆有開窗、通風佳",
                        "屋況佳、稀有釋出",
                        "優質社區、環境清幽",
                        "採光佳、座西朝東向",
                        "私有坡道平面車位"
                    ],
                    images: [
                        "images/3-2/客廳.jpg",
                        "images/3-2/主臥.jpg",
                        "images/3-2/主臥1.jpg",
                        "images/3-2/房間.jpg",
                        "images/3-2/廚房.jpg",
                        "images/3-2/衛浴.jpg",
                        "images/3-2/後陽台.jpg",
                        "images/3-2/陽台景觀.jpg",
                        "images/3-2/格局圖.jpg"
                    ],
                    description: "泳達首郡次頂樓3房車，次頂樓景觀戶稀有釋出，雙衛浴皆有開窗通風佳，優質社區環境清幽，近楊梅車站交流道，屋況佳屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758710847837!6m8!1m7!1sywqa6EeYYVCeIJ4XHZGoXQ!2m2!1d24.91181564018986!2d121.1534108154013!3f246.02!4f2.8400000000000034!5f0.4000000000000002"
                },
                {
                    id: "prop_013",
                    title: "學區溫馨唯美三房車 | 近車站",
                    number: "3-3",
                    type: "3房",
                    community: "鴻築里昂",
                    address: "楊梅區中山北路一段494巷***號3樓",
                    price: "1,380萬",
                    total_area: "47.408坪",
                    main_area: "23.631坪",
                    layout: "3房2廳2衛",
                    age: "4年",
                    floor: "3F/15F",
                    orientation: "無",
                    current_status: "空屋,隨時可看",
                    building_type: "大樓",
                    decoration_level: "有",
                    management_fee: "約2500元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "B2-213",
                    public_ratio: "32%",
                    ancillary_area: "2.595坪",
                    auxiliary_area: "2.595坪",
                    parking_area: "8.891坪",
                    common_area: "12.291坪",
                    land_share: "6.746坪",
                    completion_date: "109.12.18",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "B1-240",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["新農街商圈", "全聯福利中心", "天成醫院", "楊梅江夏堂"],
                        transport: ["台1線", "楊梅交流道", "楊梅火車站"],
                        schools: ["楊明國中", "楊明國小"],
                    market: "楊梅市場",
                        park: "楊明公園"
                    },
                    features: [
                        "明星社區管理良好有24小時警衛免追垃圾車",
                        "格局優美採光明亮暖色系裝潢真溫馨",
                        "屋齡新屋況好屋主誠心出售歡迎洽詢"
                    ],
                    images: [
                        "images/3-3/客廳.jpg",
                        "images/3-3/LINE_ALBUM_里昂三房車星期一做資料給大家可以先廣告_250901_1.jpg",
                        "images/3-3/LINE_ALBUM_里昂三房車星期一做資料給大家可以先廣告_250901_3.jpg",
                        "images/3-3/LINE_ALBUM_里昂三房車星期一做資料給大家可以先廣告_250901_8.jpg",
                        "images/3-3/LINE_ALBUM_里昂三房車星期一做資料給大家可以先廣告_250901_9.jpg",
                        "images/3-3/LINE_ALBUM_里昂三房車星期一做資料給大家可以先廣告_250901_12.jpg",
                        "images/3-3/LINE_ALBUM_里昂三房車星期一做資料給大家可以先廣告_250901_14.jpg",
                        "images/3-3/LINE_ALBUM_里昂三房車星期一做資料給大家可以先廣告_250901_15.jpg",
                        "images/3-3/格局圖.jpg"
                    ],
                    features: [
                        "新成屋",
                        "楊梅學區三房車",
                        "台1線、楊梅交流道",
                        "楊梅火車站",
                        "楊明國中",
                        "楊明國小",
                        "楊梅國小",
                        "五楊交流道",
                        "楊梅區免費公車",
                        "楊梅市場",
                        "楊明公園"
                    ],
                    description: "鴻築里昂學區溫馨唯美三房車，明星社區管理良好有24小時警衛，格局優美採光明亮暖色系裝潢，近楊梅交流道交通便利，屋主誠心出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758510953344!6m8!1m7!1sLa6_NXvMG_mE19DLCOhwsA!2m2!1d24.90569409538472!2d121.1775006696377!3f297.88538766332994!4f22.681653370717882!5f0.7820865974627469"
                },
                {
                    id: "prop_014",
                    title: "協和涵美雅邑區 | 學區宅",
                    number: "3-4",
                    type: "3房",
                    community: "協和涵美-雅邑區",
                    address: "桃園市楊梅區瑞梅街220巷***號",
                    price: "1,398萬",
                    total_area: "56.06坪",
                    main_area: "22.559坪",
                    layout: "3房1廳2衛",
                    age: "9年",
                    floor: "12F/15F",
                    orientation: "坐東北朝西南",
                    current_status: "空屋,隨時可看",
                    building_type: "電梯大樓",
                    decoration_level: "中檔裝潢",
                    management_fee: "2406元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "洽業務",
                    public_ratio: "32%",
                    ancillary_area: "3.073坪",
                    auxiliary_area: "3.073坪",
                    parking_area: "18.619坪",
                    common_area: "11.833坪",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "有",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["超商", "郵局", "連鎖餐飲", "職人五金", "全聯"],
                        transport: ["楊梅交流道", "埔心火車站"],
                        schools: ["瑞梅國小", "瑞塘國小", "瑞坪國中", "幼兒園"],
                        market: "全聯",
                        park: "鄰近公園"
                    },
                    features: [
                        "屋況毋須整理",
                        "溫馨裝潢收納不馬虎",
                        "三面採光間間開窗"
                    ],
                    images: [
                        "images/3-4/客廳.jpg",
                        "images/3-4/175766804695273308.jpg!400x300.jpg",
                        "images/3-4/175766804713971503.jpg!400x300.jpg",
                        "images/3-4/175766804733044304.jpg!400x300.jpg",
                        "images/3-4/175766804737614005.jpg!400x300.jpg",
                        "images/3-4/175766804738818301.jpg!400x300.jpg",
                        "images/3-4/175766804740583305.jpg!400x300.jpg",
                        "images/3-4/175766804742773806.jpg!400x300.jpg",
                        "images/3-4/客局圖.jpg"
                    ],
                    description: "協和涵美雅邑區明星學區宅，瑞塘國小總量管制，成熟商圈下樓就是超商郵局幼兒園，溫馨裝潢三面採光間間開窗，屋況毋須整理，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758711596566!6m8!1m7!1sj13yGVENiZ86ebZr53wFHA!2m2!1d24.90985992676112!2d121.1750276931584!3f222.83896926333173!4f27.465134123302562!5f0.7820865974627469"
                },
                {
                    id: "prop_015",
                    title: "近龍科 | 景觀三房+平面車位",
                    number: "3-5",
                    type: "3房",
                    community: "和發閱森活",
                    address: "楊梅區梅獅路二段***號7樓",
                    price: "1,360萬",
                    total_area: "51.23坪",
                    main_area: "24.12坪",
                    layout: "3房2廳2衛",
                    age: "3年",
                    floor: "7F/13F",
                    orientation: "座東北朝西南",
                    current_status: "自住,需提前約",
                    building_type: "大廈",
                    decoration_level: "有",
                    management_fee: "2505元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "B1-150",
                    public_ratio: "24%",
                    ancillary_area: "3.61坪",
                    auxiliary_area: "3.61坪",
                    parking_area: "11.15坪",
                    common_area: "12.35坪",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "B3-4",
                    completion_date: "110.07.23",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["梅獅路商圈", "UNIQLO", "星巴克", "全聯福利中心", "職人的店", "貴族世家", "愛買大賣場"],
                        transport: ["楊梅交流道", "埔心火車站"],
                        schools: ["瑞坪國中", "楊光國中小", "瑞塘國小"],
                        market: "萬大黃昏市場",
                        park: "柚子公園"
                    },
                    features: [
                        "屋齡新屋況好溫馨舒適",
                        "室內大空間採光明亮",
                        "前後陽台",
                        "近龍科溫馨景觀三房車"
                    ],
                    nearby_facilities: "梅獅路商圈、UNIQLO、星巴克、全聯福利中心、職人的店、貴族世家、愛買大賣場",
                    transportation: {
                        facilities: ["梅獅路商圈", "UNIQLO", "星巴克", "全聯福利中心"],
                        transport: ["楊梅交流道", "埔心火車站"],
                        schools: ["瑞坪國中", "楊光國中小", "瑞塘國小"],
                        market: "萬大黃昏市場",
                        park: "柚子公園"
                    },
                    images: [
                        "images/3-5/客廳.jpg",
                        "images/3-5/LINE_ALBUM_閱森活三房車7樓$1432萬、自住好約_241008_1.jpg",
                        "images/3-5/LINE_ALBUM_閱森活三房車7樓$1432萬、自住好約_241008_2.jpg",
                        "images/3-5/LINE_ALBUM_閱森活三房車7樓$1432萬、自住好約_241008_3.jpg",
                        "images/3-5/LINE_ALBUM_閱森活三房車7樓$1432萬、自住好約_241008_4.jpg",
                        "images/3-5/LINE_ALBUM_閱森活三房車7樓$1432萬、自住好約_241008_5.jpg",
                        "images/3-5/LINE_ALBUM_閱森活三房車7樓$1432萬、自住好約_241008_6.jpg",
                        "images/3-5/LINE_ALBUM_閱森活三房車7樓$1432萬、自住好約_241008_8.jpg",
                        "images/3-5/格局圖.jpg"
                    ],
                    description: "和發閱森活近龍科溫馨景觀三房車，屋齡新屋況好溫馨舒適，室內大空間採光明亮前後陽台，梅獅路商圈UNIQLO星巴克全聯福利中心，楊梅交流道埔心火車站交通便利，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758712637065!6m8!1m7!1s_m-UktKdJuD_4S-Ox5OWVw!2m2!1d24.90538868093151!2d121.1787630911767!3f342.41396748361524!4f23.539349133954076!5f0.7820865974627469"
                },
                {
                    id: "prop_016",
                    title: "誠售 | 超大室內 | 3+1房雙車位",
                    number: "3-6",
                    type: "3房",
                    community: "新都悅",
                    address: "楊梅區梅獅路二段***號4樓",
                    price: "1,498萬",
                    total_area: "65.556坪",
                    main_area: "27.176坪",
                    layout: "3房2廳2衛",
                    age: "11年",
                    floor: "4F/13F",
                    orientation: "座西朝東",
                    current_status: "空屋,需提前約",
                    building_type: "大廈",
                    decoration_level: "有",
                    management_fee: "2558元/月",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "B2-181+B2-182",
                    public_ratio: "18%",
                    ancillary_area: "4.336坪",
                    auxiliary_area: "4.336坪",
                    parking_area: "22.4坪",
                    common_area: "11.646坪",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "B2-21",
                    completion_date: "103.01.05",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["台1線", "楊梅交流道", "公車客運站", "埔心火車站"],
                        transport: ["台1線", "楊梅交流道", "埔心火車站"],
                        schools: ["瑞坪國中", "瑞塘國小"],
                        market: "萬大黃昏市場",
                        park: "頭重溪公園、柚子公園"
                    },
                    features: [
                        "室內空間寬敞明亮採光充足",
                        "設計通風優良",
                        "鄰近夜市和市集購物娛樂便利",
                        "機能完善",
                        "埔心車站與楊梅交流道交通十分便利",
                        "近明星學區及公園綠地",
                        "方便毛小孩與孩童遊玩",
                        "24小時警衛收發包裹",
                        "管理優良居住放心"
                    ],
                    images: [
                        "images/3-6/客廳.jpg",
                        "images/3-6/1753723093400.jpg",
                        "images/3-6/1753723125486.jpg",
                        "images/3-6/1753723134338.jpg",
                        "images/3-6/1753723142286.jpg",
                        "images/3-6/1753723151139.jpg",
                        "images/3-6/1753723159050.jpg",
                        "images/3-6/1753723170649.jpg",
                        "images/3-6/1753723179212.jpg",
                        "images/3-6/1753723189184.jpg",
                        "images/3-6/格局圖.jpg"
                    ],
                    description: "新都悅3+1房雙車位，室內空間寬敞明亮採光充足，設計通風優良，鄰近夜市和市集購物娛樂便利，埔心車站與楊梅交流道交通十分便利，近明星學區及公園綠地，24小時警衛收發包裹管理優良，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758714048855!6m8!1m7!1s92gHaMrfLXzuJ-5EHgVYew!2m2!1d24.90576200280845!2d121.1774291899799!3f286.15984707525587!4f19.07089499120373!5f0.7820865974627469"
                },
                {
                    id: "prop_017",
                    title: "全新落成正四房+車位 | 近車站",
                    number: "4-1",
                    type: "4房",
                    community: "和耀新加州",
                    address: "桃園市楊梅區新農街二段***號3樓",
                    price: "1,398萬",
                    total_area: "50.29坪",
                    main_area: "24.91坪",
                    layout: "4房2廳2衛",
                    age: "0年",
                    floor: "3F/12F",
                    orientation: "座南朝北",
                    current_status: "空屋,隨時可看",
                    building_type: "大廈",
                    decoration_level: "無",
                    management_fee: "未知",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "B2-175",
                    public_ratio: "32%",
                    ancillary_area: "3.25坪",
                    auxiliary_area: "3.25坪",
                    parking_area: "7.89坪",
                    common_area: "14.23坪",
                    land_share: "8.53坪",
                    completion_date: "113.12.19",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "有",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["新農商圈", "環東商圈", "頭重溪公園", "楊梅市場"],
                        transport: ["台1線", "楊梅交流道", "五楊交流道", "楊梅火車站"],
                        schools: ["楊明國中", "楊明國小", "瑞梅國小"],
                    market: "楊梅市場",
                        park: "頭重溪公園"
                    },
                    features: [
                        "全新落成正四房+車位",
                        "格局方正,空間寬敞,好規劃",
                        "含平面車位,進出無憂",
                        "屋主誠意出售,以甜價實現您的夢想藍圖"
                    ],
                    images: [
                        "images/4-1/客廳.jpg",
                        "images/4-1/主臥房視角.jpg",
                        "images/4-1/主臥房視角2.jpg",
                        "images/4-1/次臥房.jpg",
                        "images/4-1/次臥房3.jpg",
                        "images/4-1/次臥房4.jpg",
                        "images/4-1/廚房.jpg",
                        "images/4-1/衛浴.jpg",
                        "images/4-1/前陽台.jpg",
                        "images/4-1/前陽台景觀.jpg",
                        "images/4-1/後陽台.jpg",
                        "images/4-1/陽台景觀.jpg",
                        "images/4-1/格局圖.jpg"
                    ],
                    description: "和耀新加州全新落成正四房+車位，格局方正空間寬敞，環繞新農&環東雙商圈，近楊明中小學，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758708488820!6m8!1m7!1s-W5byR51RZ8R453xgsx_Ow!2m2!1d24.91221018735056!2d121.1723769198098!3f338.53221078559045!4f22.73248465991972!5f0.7820865974627469"
                },
                {
                    id: "prop_019",
                    title: "阿麗拉 | 次頂樓 | 全新未住",
                    number: "3-7",
                    type: "3房",
                    community: "阿麗拉",
                    address: "桃園市楊梅區金溪路***號9樓",
                    price: "1,188萬",
                    total_area: "45.8坪",
                    main_area: "22.4坪",
                    layout: "3房2廳2衛",
                    age: "0年",
                    floor: "9樓",
                    orientation: "座東南朝西北",
                    current_status: "住宅",
                    building_type: "電梯大樓",
                    decoration_level: "尚未裝潢",
                    management_fee: "待定",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "洽業務",
                    public_ratio: "34%",
                    ancillary_area: "1.815坪",
                    auxiliary_area: "1.815坪",
                    parking_area: "8.982坪",
                    common_area: "12.598坪",
                    land_area: "5.937坪",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "有",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["楊梅商圈", "全聯福利中心", "家樂福", "便利商店", "麥當勞", "肯德基", "星巴克"],
                        transport: ["楊梅交流道", "埔心火車站", "楊梅火車站", "國道1號"],
                        schools: ["楊光中小學"],
                        market: "萬大市場",
                        park: "頭重溪公園",
                        medical: "楊梅天成醫院"
                    },
                    features: [
                        "近楊梅交流道交通便利",
                        "阿麗拉優質社區",
                        "9樓景觀戶",
                        "全新未住屋況佳",
                        "格局方正好規劃",
                        "近埔心火車站",
                        "生活機能完善"
                    ],
                    images: [
                        "images/3-7/客廳.jpeg",
                        "images/3-7/175888643858474504.jpg!400x300.jpg",
                        "images/3-7/175888643900888708.jpg!400x300.jpg",
                        "images/3-7/175888643917374703.jpeg!400x300.jpeg",
                        "images/3-7/175888643937454408.jpeg!400x300.jpeg",
                        "images/3-7/175888643980998001.jpeg!400x300.jpeg",
                        "images/3-7/175888644026007704.jpeg!400x300.jpeg",
                        "images/3-7/175888644089375507.jpeg!400x300.jpeg",
                        "images/3-7/175888644228969906.jpeg!400x300.jpeg",
                        "images/3-7/175888644291904302.jpeg!400x300.jpeg",
                        "images/3-7/175888644376489105.jpeg!400x300.jpeg",
                        "images/3-7/格局圖.jpg"
                    ],
                    description: "近楊梅交流道阿麗拉次頂樓全新未住，室內空間寬敞明亮，採光良好通風佳，格局方正好規劃，全新未住屋況佳，近楊明國中小學區，交通便利生活機能完善，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758944454936!6m8!1m7!1swLe49AL8fg97r_WJgmY9vA!2m2!1d24.89894152750507!2d121.176107769782!3f318.56455396522597!4f25.333106488197856!5f0.7820865974627469"
                },
                {
                    id: "prop_020",
                    title: "寶欣上漾 | 三房平車 | 高樓美視野",
                    number: "3-8",
                    type: "3房",
                    community: "寶欣上漾",
                    address: "桃園市楊梅區中山北路二段***號",
                    price: "1,398萬",
                    total_area: "42.12坪",
                    main_area: "20.11坪",
                    layout: "3房2廳2衛",
                    age: "1年",
                    floor: "6F/15F",
                    orientation: "坐北朝南",
                    current_status: "住宅",
                    building_type: "電梯大樓",
                    decoration_level: "有",
                    management_fee: "洽業務",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "洽業務",
                    public_ratio: "0%",
                    ancillary_area: "2.44坪",
                    auxiliary_area: "2.44坪",
                    parking_area: "洽業務",
                    common_area: "洽業務",
                    land_area: "洽業務",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "有",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["楊梅商圈", "全聯福利中心", "愛買楊梅店", "便利商店", "丁丁連鎖藥妝"],
                        transport: ["楊梅交流道", "楊梅火車站", "國道1號", "公車站"],
                        schools: ["楊光國小", "楊光國中"],
                        market: "萬大市場",
                        park: "頭重溪公園",
                        medical: "楊梅天成醫院"
                    },
                    features: [
                        "高樓層景觀戶",
                        "坐北朝南通風佳",
                        "全新社區管理佳",
                        "格局方正好規劃",
                        "近愛買購物便利",
                        "交通便利生活機能完善"
                    ],
                    images: [
                        "images/3-8/客廳.jpg",
                        "images/3-8/175267102120970809.jpg!400x300.jpg",
                        "images/3-8/175267102127691807.jpg!400x300.jpg",
                        "images/3-8/175267102127869007.jpg!400x300.jpg",
                        "images/3-8/175267102129607207.jpg!400x300.jpg",
                        "images/3-8/175267102305193800.jpg!400x300.jpg",
                        "images/3-8/175267102315480509.jpg!400x300.jpg",
                        "images/3-8/175267102322697904.jpg!400x300.jpg",
                        "images/3-8/175267102324824209.jpg!400x300.jpg",
                        "images/3-8/175267102350304901.jpg!400x300.jpg",
                        "images/3-8/175267102468468604.jpg!400x300.jpg",
                        "images/3-8/175267102488939009.jpg!400x300.jpg",
                        "images/3-8/175267102490459706.jpg!400x300.jpg",
                        "images/3-8/175267102513017809.jpg!400x300.jpg"
                    ],
                    description: "楊梅寶欣上漾三房平車，高樓層景觀戶坐北朝南通風佳，全新社區管理佳格局方正好規劃，近愛買購物便利交通便利生活機能完善，屋主誠意出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758945620865!6m8!1m7!1sEfh5JikWHXTXSBsth1mXag!2m2!1d24.90829015615317!2d121.1697836767722!3f188.03495162479885!4f17.206956712078295!5f0.7820865974627469"
                },
                {
                    id: "prop_018",
                    title: "和耀新加州四房雙車位 | 近車站",
                    number: "4-2",
                    type: "4房",
                    community: "和耀新加州",
                    address: "桃園市楊梅區新農街二段***號3樓",
                    price: "1,568萬",
                    total_area: "58.13坪",
                    main_area: "24.90坪",
                    layout: "4房2廳2衛",
                    age: "0年",
                    floor: "3F/12F",
                    orientation: "座南朝北",
                    current_status: "空屋,隨時可看",
                    building_type: "大廈",
                    decoration_level: "無",
                    management_fee: "未知",
                    with_lease: "否",
                    legal_use: "住家用",
                    parking: "平面車位",
                    parking_space: "B2-173 B2-174",
                    public_ratio: "32%",
                    ancillary_area: "3.25坪",
                    auxiliary_area: "3.25坪",
                    parking_area: "15.78坪",
                    common_area: "14.18坪",
                    land_share: "8.53坪",
                    completion_date: "113.12.19",
                    natural_gas: "有",
                    security: "有",
                    motorcycle_space: "有",
                    amenities: [
                        "近便利商店",
                        "近公園綠地",
                        "近夜市",
                        "近傳統市場",
                        "近學校",
                        "近百貨公司",
                        "近醫療機構"
                    ],
                    transportation: {
                        facilities: ["新農商圈", "環東路商圈", "頭重溪公園", "楊梅市場"],
                        transport: ["台1線", "楊梅交流道", "五楊交流道", "楊梅火車站", "埔心火車站"],
                        schools: ["楊明國中", "楊明國小", "瑞梅國小"],
                    market: "楊梅市場",
                        park: "頭重溪公園"
                    },
                    features: [
                        "和耀新加州四房雙車位",
                        "室內空間大、好規劃利用",
                        "平面車位,汽車停放方便,出行更加便捷",
                        "屋主割愛,現因個人原因割愛出售"
                    ],
                    images: [
                        "images/4-2/客廳全景.jpg",
                        "images/4-2/客廳細節.jpg",
                        "images/4-2/客廳角度二.jpg",
                        "images/4-2/主臥室.jpg",
                        "images/4-2/主臥衛浴開窗.jpg",
                        "images/4-2/次臥室.jpg",
                        "images/4-2/次臥房3.jpg",
                        "images/4-2/次臥房4.jpg",
                        "images/4-2/臥室細節.jpg",
                        "images/4-2/廚房.jpg",
                        "images/4-2/衛浴開窗.jpg",
                        "images/4-2/後陽台.jpg",
                        "images/4-2/陽台景觀.jpg",
                        "images/4-2/格局圖.jpg"
                    ],
                    description: "和耀新加州四房雙車位，室內空間大好規劃，新農環東雙商圈生活機能完善，近楊明國中小提升生活品質，屋主割愛出售。",
                    google_maps: "https://www.google.com/maps/embed?pb=!4v1758708898393!6m8!1m7!1s-W5byR51RZ8R453xgsx_Ow!2m2!1d24.91221018735056!2d121.1723769198098!3f338.53221078559045!4f22.73248465991972!5f0.7820865974627469"
                }
            ],
            settings: {
                itemsPerPage: 6,
                maxPages: 10,
                enableSearch: true,
                enableFilter: true
            }
        };

        // 修改分頁系統以使用內嵌資料
        class EmbeddedPropertyPaginationSystem {
            constructor() {
                this.properties = embeddedPropertiesData.properties;
                this.currentPage = 1;
                this.itemsPerPage = embeddedPropertiesData.settings.itemsPerPage || 4;
                this.currentFilter = 'all';
                this.searchTerm = '';
                this.init();
            }

            init() {
                this.renderProperties();
                this.setupEventListeners();
            }

            getFilteredProperties() {
                let filtered = this.properties;
                
                // 篩選功能
                if (this.currentFilter !== 'all') {
                    filtered = filtered.filter(property => property.type === this.currentFilter);
                }
                
                // 搜尋功能
                if (this.searchTerm) {
                    const term = this.searchTerm.toLowerCase();
                    filtered = filtered.filter(property => 
                        property.title.toLowerCase().includes(term) ||
                        property.address.toLowerCase().includes(term)
                    );
                }
                
                // 自動排序：有標籤的物件排在前面
                filtered.sort((a, b) => {
                    const aHasTag = a.status && a.statusText;
                    const bHasTag = b.status && b.statusText;
                    
                    // 有標籤的排在前面
                    if (aHasTag && !bHasTag) return -1;
                    if (!aHasTag && bHasTag) return 1;
                    
                    // 如果都有標籤或都沒有標籤，保持原有順序
                    return 0;
                });
                
                return filtered;
            }

            getPaginatedProperties() {
                const filtered = this.getFilteredProperties();
                const startIndex = (this.currentPage - 1) * this.itemsPerPage;
                const endIndex = startIndex + this.itemsPerPage;
                return filtered.slice(startIndex, endIndex);
            }

            getTotalPages() {
                const filtered = this.getFilteredProperties();
                return Math.ceil(filtered.length / this.itemsPerPage);
            }

            renderProperties() {
                const container = document.getElementById('properties-container');
                if (!container) return;

                const properties = this.getPaginatedProperties();
                const totalPages = this.getTotalPages();

                // 清空容器
                container.innerHTML = '';

                // 渲染物件卡片
                properties.forEach(property => {
                    const card = this.createPropertyCard(property);
                    container.appendChild(card);
                });

                // 渲染分頁按鈕
                this.renderPagination(totalPages);

                // 更新統計資訊
                this.updateStats();
                
                // 自動調整標題字體大小
                setTimeout(() => {
                    adjustTitleFontSize();
                }, 100);
            }

            createPropertyCard(property) {
                const card = document.createElement('div');
                card.className = 'property-card';
                card.innerHTML = `
                    ${property.status && property.statusText ? `
                        <div class="property-status-tag status-${property.status}">
                            ${property.statusText}
                        </div>
                    ` : ''}
                    <h3 class="property-title">${property.title}</h3>
                    
                    <!-- 照片滾動區 -->
                    <div class="photo-scroll-container" style="margin: 0.6rem 0; overflow-x: auto; padding: 0.5rem 0;">
                        <div class="photo-scroll" style="display: flex; gap: 0.5rem; width: max-content;">
                            ${property.images.map((img, index) => `
                                <div class="photo-item" onclick="openLightbox(${index}, '${property.id}')" 
                                     style="flex-shrink: 0; width: 80px; height: 60px; border-radius: 4px; overflow: hidden; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <img src="${img}" alt="物件照片" style="width: 100%; height: 100%; object-fit: cover;" loading="lazy" onerror="this.style.display='none'">
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- 物件資訊 -->
                    <div class="property-info" style="padding: 0.8rem; background: #f8f9fa; border-radius: 8px; margin: 0.5rem 0;">
                        <div style="display: flex; gap: 0.3rem; margin-bottom: 0.6rem;">
                            <div style="flex: 1; text-align: center; padding: 0.3rem 0.2rem; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 4px; font-weight: 600;">
                                <div style="font-size: 0.7rem; opacity: 0.9; margin-bottom: 0.1rem;">售價</div>
                                <div style="font-size: 1.2rem;">${property.price}</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 0.3rem 0.2rem; background: linear-gradient(135deg, #f093fb, #f5576c); color: white; border-radius: 4px; font-weight: 600;">
                                <div style="font-size: 0.7rem; opacity: 0.9; margin-bottom: 0.1rem;">坪數</div>
                                <div style="font-size: 1.2rem;">${property.total_area || property.area || '未設定'}</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 0.6rem;">
                            <strong>📍 地址：</strong>${property.address}
                        </div>
                        
                        ${property.layout ? `
                        <div style="margin-bottom: 0.6rem; display: flex; gap: 0.3rem;">
                            <div style="flex: 1; padding: 0.3rem 0.2rem; background: #e8f5e8; border-radius: 4px; text-align: center; font-size: 1.3rem;">
                                <strong>格局：</strong>${property.layout}
                            </div>
                            <div style="flex: 1; padding: 0.3rem 0.2rem; background: #e8f5e8; border-radius: 4px; text-align: center; font-size: 1.3rem;">
                                <strong>屋齡：</strong>${property.age || '未設定'}
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- 街景地圖預覽 -->
                        <div style="margin-bottom: 0.8rem;">
                            <div style="border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); position: relative; cursor: pointer;" onclick="showMapModal('${property.id}')">
                                <iframe src="${property.google_maps || 'https://www.google.com/maps/embed?pb=!4v1758635508112!6m8!1m7!1sTcuziJwB6dHCbFzTFsQVIw!2m2!1d24.90580115978875!2d121.1774002660474!3f281.776500634199!4f24.362884434893175!5f0.7820865974627469'}" width="100%" height="120" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0'">
                                    <div style="background: rgba(0,0,0,0.7); color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9rem; font-weight: 600;">
                                        <i class="fas fa-expand"></i> 查看大地圖
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; justify-content: center; align-items: center; position: relative;">
                            <button onclick="showPropertyDetails('${property.id}')" 
                                    style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); flex: 1; font-size: 1rem;">
                                <i class="fas fa-info-circle"></i> 詳細資訊
                            </button>
                            <button onclick="showLoanCalculator('${property.id}')" 
                                    style="background: linear-gradient(45deg, #10b981, #3b82f6); color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3); flex: 1; font-size: 1rem;">
                                <i class="fas fa-calculator"></i> 貸款試算
                            </button>
                            ${property.number ? `
                            <div style="position: absolute; bottom: -8px; right: -8px; background: rgba(102, 126, 234, 0.9); color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.7rem; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                                ${property.number}
                            </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                return card;
            }

            renderPagination(totalPages) {
                const container = document.getElementById('pagination-container');
                if (!container || totalPages <= 1) {
                    if (container) container.innerHTML = '';
                    return;
                }

                let paginationHTML = '<div class="pagination" style="display: flex; justify-content: center; align-items: center; gap: 0.5rem; margin: 2rem 0;">';
                
                // 上一頁按鈕
                if (this.currentPage > 1) {
                    paginationHTML += `
                        <button onclick="embeddedPaginationSystem.goToPage(${this.currentPage - 1})" 
                                style="background: #667eea; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; transition: all 0.3s ease;">
                            <i class="fas fa-chevron-left"></i> 上一頁
                        </button>
                    `;
                }

                // 頁碼按鈕 - 顯示所有頁碼
                for (let i = 1; i <= totalPages; i++) {
                    const isActive = i === this.currentPage;
                    paginationHTML += `
                        <button onclick="embeddedPaginationSystem.goToPage(${i})" 
                                style="background: ${isActive ? '#667eea' : '#f8f9fa'}; color: ${isActive ? 'white' : '#666'}; border: ${isActive ? '2px solid #667eea' : '1px solid #ddd'}; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; font-weight: ${isActive ? 'bold' : 'normal'}; min-width: 40px;">
                            ${i}
                        </button>
                    `;
                }

                // 下一頁按鈕
                if (this.currentPage < totalPages) {
                    paginationHTML += `
                        <button onclick="embeddedPaginationSystem.goToPage(${this.currentPage + 1})" 
                                style="background: #667eea; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; transition: all 0.3s ease;">
                            下一頁 <i class="fas fa-chevron-right"></i>
                        </button>
                    `;
                }

                paginationHTML += '</div>';
                container.innerHTML = paginationHTML;
            }

            updateStats() {
                const container = document.getElementById('stats-container');
                if (!container) return;

                const filtered = this.getFilteredProperties();
                const total = this.properties.length;
                const showing = filtered.length;
                
                container.innerHTML = `
                    <div style="text-align: center; margin: 1rem 0; padding: 1rem; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 10px;">
                        <div style="font-size: 0.8rem; font-weight: 600;">
                            顯示 ${showing} 個物件，共 ${total} 個物件
                            ${this.currentFilter !== 'all' ? `（篩選：${this.currentFilter}）` : ''}
                            ${this.searchTerm ? `（搜尋：${this.searchTerm}）` : ''}
                        </div>
                    </div>
                `;
            }

            goToPage(page) {
                const totalPages = this.getTotalPages();
                if (page >= 1 && page <= totalPages) {
                    this.currentPage = page;
                    this.renderProperties();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }

            setFilter(filter) {
                this.currentFilter = filter;
                this.currentPage = 1;
                this.renderProperties();
            }

            setSearch(term) {
                this.searchTerm = term;
                this.currentPage = 1;
                this.renderProperties();
            }

            setupEventListeners() {
                // 搜尋功能
                const searchInput = document.getElementById('property-search');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.setSearch(e.target.value);
                    });
                }

                // 篩選按鈕
                const filterButtons = document.querySelectorAll('.filter-button');
                filterButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        const filter = e.target.dataset.filter;
                        this.setFilter(filter);
                        
                        // 更新按鈕狀態
                        filterButtons.forEach(btn => {
                            btn.style.background = btn === e.target ? 
                                'linear-gradient(45deg, #667eea, #764ba2)' : 'transparent';
                            btn.style.color = btn === e.target ? 'white' : '#666';
                        });
                    });
                });
            }
        }

        // 物件詳細資訊函數
        function showPropertyDetails(propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (property) {
                showPropertyModal(property);
            }
        }

        // 美化的物件詳細資訊彈窗
        function showPropertyModal(property) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: #ffffff;
                    border-radius: 15px;
                    max-width: 100vw;
                    max-height: 90vh;
                    position: relative;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    overflow: hidden;
                    display: flex;
                    flex-direction: column;
                ">
                    <!-- 關閉按鈕 -->
                    <button onclick="closePropertyModal()" style="
                        position: absolute;
                        top: 15px;
                        right: 15px;
                        background: #e74c3c;
                        color: white;
                        border: none;
                        width: 35px;
                        height: 35px;
                        border-radius: 50%;
                        cursor: pointer;
                        font-size: 18px;
                        font-weight: bold;
                        z-index: 10002;
                        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='#c0392b'" onmouseout="this.style.background='#e74c3c'">×</button>
                    
                    <!-- 標題區域 -->
                    <div style="
                        background: #667eea;
                        color: white;
                        padding: 15px 20px;
                        position: relative;
                    ">
                        ${property.status && property.statusText ? `
                            <div class="modal-status-tag modal-status-${property.status}">
                                ${property.statusText}
                            </div>
                        ` : ''}
                        <h2 style="margin: 0; font-size: 1.3rem; font-weight: 600;">
                            🏠 ${property.title}
                        </h2>
                        <p style="margin: 8px 0 0 0; opacity: 0.9; font-size: 0.95rem;">
                            📍 ${property.address}
                        </p>
                    </div>
                    
                    <!-- 內容區域 -->
                    <div style="padding: 10px 15px; flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; scrollbar-width: thin; scrollbar-color: #667eea #f1f1f1; min-height: 0; max-height: none;">
                        <!-- 主要資訊卡片 -->
                        <div class="main-info-grid" style="
                            display: flex;
                            gap: 0.3rem;
                            margin-bottom: 15px;
                        ">
                            <div style="
                                flex: 1;
                                background: #667eea;
                                color: white;
                                padding: 0.4rem 0.2rem;
                                border-radius: 6px;
                                text-align: center;
                            ">
                                <div style="font-size: 0.7rem; opacity: 0.9; margin-bottom: 0.1rem;">💰 售價</div>
                                <div style="font-size: 1rem; font-weight: 600;">${property.price}</div>
                            </div>
                            
                            <div style="
                                flex: 1;
                                background: #f093fb;
                                color: white;
                                padding: 0.4rem 0.2rem;
                                border-radius: 6px;
                                text-align: center;
                            ">
                                <div style="font-size: 0.7rem; opacity: 0.9; margin-bottom: 0.1rem;">📐 坪數</div>
                                <div style="font-size: 1rem; font-weight: 600;">${property.total_area || '未設定'}</div>
                            </div>
                            
                            <div style="
                                flex: 1;
                                background: #4ecdc4;
                                color: white;
                                padding: 0.4rem 0.2rem;
                                border-radius: 6px;
                                text-align: center;
                            ">
                                <div style="font-size: 0.7rem; opacity: 0.9; margin-bottom: 0.1rem;">🏠 格局</div>
                                <div style="font-size: 1rem; font-weight: 600;">${property.layout || '未設定'}</div>
                            </div>
                        </div>
                        
                        <!-- 詳細資訊 -->
                        <div style="
                            background: #f8f9fa;
                            border-radius: 12px;
                            padding: 12px;
                            margin-bottom: 12px;
                            border-left: 4px solid #667eea;
                        ">
                            <h3 style="margin: 0 0 8px 0; color: #2c3e50; font-size: 1rem; display: flex; align-items: center;">
                                <i class="fas fa-info-circle" style="margin-right: 6px; color: #667eea; font-size: 0.9rem;"></i>物件詳細資訊
                            </h3>
                            <div class="property-detail-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 12px; font-size: 0.9rem;">
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">屋齡：</span>
                                    <span style="color: #2c3e50; font-weight: 600;">${property.age || '未設定'}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">樓層：</span>
                                    <span style="color: #2c3e50; font-weight: 600;">${property.floor || '未設定'}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">車位：</span>
                                    <span style="color: #2c3e50; font-weight: 600;">${property.parking_type || '平面車位'}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">類型：</span>
                                    <span style="color: #2c3e50; font-weight: 600;">${property.type}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">座向：</span>
                                    <span style="color: #2c3e50; font-weight: 600;">${property.orientation || '座北朝南'}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">學區交通：</span>
                                    <span style="color: #667eea; font-weight: 600; cursor: pointer; text-decoration: underline;" 
                                          onclick="showTransportationDetails('${property.id}')" 
                                          onmouseover="this.style.color='#5a6fd8'" 
                                          onmouseout="this.style.color='#667eea'">查看詳情</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">權狀坪數：</span>
                                    <span style="color: #667eea; font-weight: 600; cursor: pointer; text-decoration: underline;" 
                                          onclick="showAreaDetails('${property.id}')" 
                                          onmouseover="this.style.color='#5a6fd8'" 
                                          onmouseout="this.style.color='#667eea'">${property.total_area || '未設定'}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                                    <span style="color: #666; font-weight: 500;">機能特色：</span>
                                    <span style="color: #667eea; font-weight: 600; cursor: pointer; text-decoration: underline;" 
                                          onclick="showFeaturesDetails('${property.id}')" 
                                          onmouseover="this.style.color='#5a6fd8'" 
                                          onmouseout="this.style.color='#667eea'">
                                        ${property.features && property.features.length > 0 ? property.features.length + '項特色' : '查看特色'}
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 照片預覽 -->
                        <div style="margin-bottom: 15px;">
                            <h3 style="margin: 0 0 12px 0; color: #2c3e50; font-size: 1.1rem; display: flex; align-items: center;">
                                <i class="fas fa-images" style="margin-right: 8px; color: #667eea;"></i>物件照片
                            </h3>
                            <div style="
                                display: flex;
                                gap: 10px;
                                overflow-x: auto;
                                padding: 10px 0;
                                -webkit-overflow-scrolling: touch;
                            ">
                                ${property.images.slice(0, 6).map(img => `
                                    <img src="${img}" 
                                         alt="物件照片" 
                                         loading="lazy"
                                         style="
                                             width: 80px;
                                             height: 60px;
                                             object-fit: cover;
                                             border-radius: 8px;
                                             cursor: pointer;
                                             box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                                             transition: transform 0.3s ease;
                                         "
                                         onmouseover="this.style.transform='scale(1.05)'"
                                         onmouseout="this.style.transform='scale(1)'"
                                         onclick="openLightbox(${property.images.indexOf(img)}, '${property.id}');">
                                `).join('')}
                                ${property.images.length > 6 ? `
                                    <div style="
                                        width: 80px;
                                        height: 60px;
                                        background: linear-gradient(135deg, #667eea, #764ba2);
                                        color: white;
                                        border-radius: 8px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-size: 0.8rem;
                                        font-weight: 600;
                                        cursor: pointer;
                                        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                                    " onclick="openLightbox(0, '${property.id}');">
                                        +${property.images.length - 6}
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <!-- 聯絡按鈕 -->
                        <div style="
                            display: flex;
                            gap: 15px;
                            margin-top: 25px;
                        ">
                            <a href="tel:0928776755" style="
                                background: linear-gradient(45deg, #667eea, #764ba2);
                                color: white;
                                text-decoration: none;
                                padding: 12px 20px;
                                border-radius: 25px;
                                font-weight: 600;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                                transition: all 0.3s ease;
                                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                                flex: 1;
                                justify-content: center;
                                font-size: 0.9rem;
                            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                <i class="fas fa-phone"></i> 立即來電
                            </a>
                            <a href="https://lin.ee/Lax7jMka" target="_blank" style="
                                background: linear-gradient(45deg, #00c851, #00a085);
                                color: white;
                                text-decoration: none;
                                padding: 12px 20px;
                                border-radius: 25px;
                                font-weight: 600;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                                transition: all 0.3s ease;
                                box-shadow: 0 4px 15px rgba(0, 200, 81, 0.3);
                                flex: 1;
                                justify-content: center;
                                font-size: 0.9rem;
                            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                <i class="fab fa-line"></i> LINE聯絡
                            </a>
                        </div>
                    </div>
                </div>
            `;
            
            // 移除動畫樣式以提升性能
            
            modal.className = 'modal';
            modal.id = 'propertyModal';
            currentPropertyModal = modal;
            document.body.appendChild(modal);
            
            // 點擊背景關閉
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closePropertyModal();
                }
            });
            
            // ESC 鍵關閉
            const handleEsc = (e) => {
                if (e.key === 'Escape') {
                    closePropertyModal();
                    document.removeEventListener('keydown', handleEsc);
                }
            };
            document.addEventListener('keydown', handleEsc);
        }

        // 關閉物件詳細資訊彈窗
        function closePropertyModal() {
            if (currentPropertyModal) {
                currentPropertyModal.remove();
                currentPropertyModal = null;
            }
        }

        // 顯示機能特色詳細資訊浮框
        function showFeaturesDetails(propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (!property) return;

            // 檢查是否已經有浮框存在
            const existingTooltip = document.getElementById('features-details-tooltip');
            if (existingTooltip) {
                existingTooltip.remove();
                return;
            }

            // 創建浮框
            const tooltip = document.createElement('div');
            tooltip.id = 'features-details-tooltip';
            tooltip.style.cssText = `
                position: fixed;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                border: 2px solid #667eea;
                border-radius: 15px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.25);
                z-index: 10001;
                max-width: 400px;
                font-size: 0.9rem;
                overflow: hidden;
            `;

            // 計算位置（手機版居中顯示）
            const clickedElement = event.target;
            const rect = clickedElement.getBoundingClientRect();
            
            // 手機版居中顯示
            if (window.innerWidth <= 768) {
                tooltip.style.left = '50%';
                tooltip.style.top = '50%';
                tooltip.style.transform = 'translate(-50%, -50%)';
                tooltip.style.maxWidth = '90vw';
                tooltip.style.maxHeight = '80vh';
            } else {
                // 桌面版在點擊元素附近
                const tooltipX = rect.left + rect.width / 2 - 200;
                const tooltipY = rect.top - 15;
                tooltip.style.left = Math.max(10, tooltipX) + 'px';
                tooltip.style.top = Math.max(10, tooltipY) + 'px';
            }

            // 顯示機能特色內容
            const featuresList = property.features && property.features.length > 0 
                ? property.features.map(feature => `
                    <div style="display: flex; align-items: flex-start; gap: 8px; margin-bottom: 10px; padding: 8px; background: rgba(102, 126, 234, 0.05); border-radius: 8px; border-left: 3px solid #667eea;">
                        <span style="color: #667eea; font-size: 1.1rem; margin-top: 2px;">✨</span>
                        <span style="color: #2c3e50; font-weight: 500; line-height: 1.4;">${feature}</span>
                    </div>
                `).join('')
                : '<div style="text-align: center; color: #666; padding: 20px;">暫無特色資訊</div>';

            tooltip.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    padding: 15px 20px;
                    text-align: center;
                    cursor: pointer;
                " onclick="closeFeaturesTooltip()">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 1.1rem;">🏠</span>
                        <span style="font-weight: 600;">物件機能特色</span>
                    </div>
                </div>
                <div style="padding: 15px; line-height: 1.4; cursor: pointer; max-height: 400px; overflow-y: auto;" onclick="closeFeaturesTooltip()">
                    <div style="margin-bottom: 10px; color: #2c3e50; font-weight: 600; font-size: 0.95rem; text-align: center; padding-bottom: 10px; border-bottom: 1px solid #e9ecef;">
                        ${property.title}
                    </div>
                    ${featuresList}
                </div>
            `;

            // 全域關閉函數
            window.closeFeaturesTooltip = function() {
                tooltip.remove();
                document.removeEventListener('click', closeTooltip);
                document.removeEventListener('scroll', closeTooltip);
                delete window.closeFeaturesTooltip;
            };

            document.body.appendChild(tooltip);

            // 點擊其他地方關閉浮框
            const closeTooltip = (e) => {
                if (!tooltip.contains(e.target) && e.target !== clickedElement) {
                    tooltip.remove();
                    document.removeEventListener('click', closeTooltip);
                    document.removeEventListener('scroll', closeTooltip);
                    delete window.closeFeaturesTooltip;
                }
            };

            // 滾動時關閉浮框
            const closeOnScroll = () => {
                tooltip.remove();
                document.removeEventListener('click', closeTooltip);
                document.removeEventListener('scroll', closeTooltip);
                delete window.closeFeaturesTooltip;
            };

            setTimeout(() => {
                document.addEventListener('click', closeTooltip);
                document.addEventListener('scroll', closeTooltip, true);
            }, 100);
        }

        // 顯示學區交通詳細資訊浮框
        function showTransportationDetails(propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (!property) return;

            // 檢查是否已經有浮框存在
            const existingTooltip = document.getElementById('transportation-details-tooltip');
            if (existingTooltip) {
                existingTooltip.remove();
                return;
            }

            // 創建浮框
            const tooltip = document.createElement('div');
            tooltip.id = 'transportation-details-tooltip';
            tooltip.style.cssText = `
                position: fixed;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                border: 2px solid #667eea;
                border-radius: 15px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.25);
                z-index: 10001;
                max-width: 700px;
                width: 90vw;
                max-height: 80vh;
                font-size: 0.9rem;
                overflow: hidden;
            `;

            // 計算位置（手機版居中顯示）
            const clickedElement = event.target;
            const rect = clickedElement.getBoundingClientRect();
            
            // 手機版居中顯示
            if (window.innerWidth <= 768) {
                tooltip.style.left = '50%';
                tooltip.style.top = '50%';
                tooltip.style.transform = 'translate(-50%, -50%)';
                tooltip.style.maxWidth = '95vw';
                tooltip.style.maxHeight = '85vh';
                tooltip.style.width = '95vw';
            } else {
                // 電腦版也居中顯示
                tooltip.style.left = '50%';
                tooltip.style.top = '50%';
                tooltip.style.transform = 'translate(-50%, -50%)';
                tooltip.style.width = 'auto';
                tooltip.style.maxWidth = '600px';
                tooltip.style.minWidth = '400px';
                tooltip.style.maxHeight = '70vh';
            }

            // 顯示學區交通內容
            const transportation = property.transportation || {};
            
            const facilitiesList = transportation.facilities && transportation.facilities.length > 0 
                ? transportation.facilities.map(facility => `
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding: 6px 10px; background: rgba(46, 204, 113, 0.05); border-radius: 6px; border-left: 3px solid #2ecc71;">
                        <span style="color: #2ecc71; font-size: 1rem;">🏢</span>
                        <span style="color: #2c3e50; font-weight: 500;">${facility}</span>
                    </div>
                `).join('')
                : '<div style="text-align: center; color: #666; padding: 10px;">暫無設施資訊</div>';

            const transportList = transportation.transport && transportation.transport.length > 0 
                ? transportation.transport.map(trans => `
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding: 6px 10px; background: rgba(52, 152, 219, 0.05); border-radius: 6px; border-left: 3px solid #3498db;">
                        <span style="color: #3498db; font-size: 1rem;">🚗</span>
                        <span style="color: #2c3e50; font-weight: 500;">${trans}</span>
                    </div>
                `).join('')
                : '<div style="text-align: center; color: #666; padding: 10px;">暫無交通資訊</div>';

            const schoolsList = transportation.schools && transportation.schools.length > 0 
                ? transportation.schools.map(school => `
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding: 6px 10px; background: rgba(155, 89, 182, 0.05); border-radius: 6px; border-left: 3px solid #9b59b6;">
                        <span style="color: #9b59b6; font-size: 1rem;">🎓</span>
                        <span style="color: #2c3e50; font-weight: 500;">${school}</span>
                    </div>
                `).join('')
                : '<div style="text-align: center; color: #666; padding: 10px;">暫無學校資訊</div>';

            const marketPark = `
                ${transportation.market ? `
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding: 6px 10px; background: rgba(230, 126, 34, 0.05); border-radius: 6px; border-left: 3px solid #e67e22;">
                        <span style="color: #e67e22; font-size: 1rem;">🛒</span>
                        <span style="color: #2c3e50; font-weight: 500;">${transportation.market}</span>
                    </div>
                ` : ''}
                ${transportation.park ? `
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding: 6px 10px; background: rgba(39, 174, 96, 0.05); border-radius: 6px; border-left: 3px solid #27ae60;">
                        <span style="color: #27ae60; font-size: 1rem;">🌳</span>
                        <span style="color: #2c3e50; font-weight: 500;">${transportation.park}</span>
                    </div>
                ` : ''}
            `;

            tooltip.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    padding: 15px 20px;
                    text-align: center;
                    cursor: pointer;
                " onclick="closeTransportationTooltip()">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 1.1rem;">🚌</span>
                        <span style="font-weight: 600;">學區交通環境</span>
                    </div>
                </div>
                <div style="padding: 15px; line-height: 1.4; cursor: pointer; max-height: calc(80vh - 60px); overflow-y: auto;" onclick="closeTransportationTooltip()">
                    <div style="margin-bottom: 15px; color: #2c3e50; font-weight: 600; font-size: 0.95rem; text-align: center; padding-bottom: 10px; border-bottom: 2px solid #667eea;">
                        ${property.title}
                    </div>
                    
                    <!-- 多欄佈局 -->
                    <div style="display: grid; grid-template-columns: ${window.innerWidth <= 768 ? '1fr' : '1fr 1fr'}; gap: 20px;">
                        <!-- 左欄 -->
                        <div>
                            <div style="margin-bottom: 15px;">
                                <h4 style="margin: 0 0 10px 0; color: #2ecc71; font-size: 0.85rem; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                                    <span>🏢</span> 鄰近明顯設施
                                </h4>
                                <div style="max-height: 200px; overflow-y: auto;">
                                    ${facilitiesList}
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="margin: 0 0 10px 0; color: #3498db; font-size: 0.85rem; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                                    <span>🚗</span> 交通
                                </h4>
                                <div style="max-height: 200px; overflow-y: auto;">
                                    ${transportList}
                                </div>
                            </div>
                        </div>
                        
                        <!-- 右欄 -->
                        <div>
                            <div style="margin-bottom: 15px;">
                                <h4 style="margin: 0 0 10px 0; color: #9b59b6; font-size: 0.85rem; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                                    <span>🎓</span> 學校
                                </h4>
                                <div style="max-height: 200px; overflow-y: auto;">
                                    ${schoolsList}
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="margin: 0 0 10px 0; color: #e67e22; font-size: 0.85rem; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                                    <span>🛒</span> 市場 & <span>🌳</span> 公園
                                </h4>
                                <div style="max-height: 200px; overflow-y: auto;">
                                    ${marketPark}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // 全域關閉函數
            window.closeTransportationTooltip = function() {
                tooltip.remove();
                document.removeEventListener('click', closeTooltip);
                document.removeEventListener('scroll', closeTooltip);
                delete window.closeTransportationTooltip;
            };

            document.body.appendChild(tooltip);

            // 點擊其他地方關閉浮框
            const closeTooltip = (e) => {
                if (!tooltip.contains(e.target) && e.target !== clickedElement) {
                    tooltip.remove();
                    document.removeEventListener('click', closeTooltip);
                    document.removeEventListener('scroll', closeTooltip);
                    delete window.closeTransportationTooltip;
                }
            };

            // 滾動時關閉浮框
            const closeOnScroll = () => {
                tooltip.remove();
                document.removeEventListener('click', closeTooltip);
                document.removeEventListener('scroll', closeTooltip);
                delete window.closeTransportationTooltip;
            };

            setTimeout(() => {
                document.addEventListener('click', closeTooltip);
                document.addEventListener('scroll', closeTooltip, true);
            }, 100);
        }

        // 顯示權狀坪數詳細資訊浮框
        function showAreaDetails(propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (!property) return;

            // 檢查是否已經有浮框存在
            const existingTooltip = document.getElementById('area-details-tooltip');
            if (existingTooltip) {
                existingTooltip.remove();
                return;
            }

            // 創建浮框
            const tooltip = document.createElement('div');
            tooltip.id = 'area-details-tooltip';
            tooltip.style.cssText = `
                position: fixed;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                border: 2px solid #667eea;
                border-radius: 15px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.25);
                z-index: 10001;
                max-width: 320px;
                font-size: 0.9rem;
                overflow: hidden;
            `;

            // 計算位置（手機版居中顯示）
            const clickedElement = event.target;
            const rect = clickedElement.getBoundingClientRect();
            
            // 手機版居中顯示
            if (window.innerWidth <= 768) {
                tooltip.style.left = '50%';
                tooltip.style.top = '50%';
                tooltip.style.transform = 'translate(-50%, -50%)';
                tooltip.style.maxWidth = '90vw';
                tooltip.style.maxHeight = '80vh';
            } else {
                // 桌面版在點擊元素附近
                const tooltipX = rect.left + rect.width / 2 - 160;
                const tooltipY = rect.top - 15;
                tooltip.style.left = Math.max(10, tooltipX) + 'px';
                tooltip.style.top = Math.max(10, tooltipY) + 'px';
            }

            // 直接顯示完整內容，添加點擊關閉功能
            tooltip.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    padding: 15px 20px;
                    text-align: center;
                    cursor: pointer;
                " onclick="closeAreaTooltip()">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 1.1rem;">📐</span>
                        <span style="font-weight: 600;">坪數詳細資訊</span>
                    </div>
                </div>
                <div style="padding: 15px; line-height: 1.4; cursor: pointer;" onclick="closeAreaTooltip()">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                        <span style="color: #666; font-weight: 500;">主建物：</span>
                        <span style="color: #2c3e50; font-weight: 600;">${property.main_area || '17.76坪'}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                        <span style="color: #666; font-weight: 500;">附屬建物：</span>
                        <span style="color: #2c3e50; font-weight: 600;">${property.auxiliary_area || '2.25坪'}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                        <span style="color: #666; font-weight: 500;">車位坪數：</span>
                        <span style="color: #2c3e50; font-weight: 600;">${property.parking_area || '8.81坪'}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                        <span style="color: #666; font-weight: 500;">公設：</span>
                        <span style="color: #2c3e50; font-weight: 600;">${property.common_area || '9.36坪'}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding: 6px 0; border-bottom: 1px solid #e9ecef;">
                        <span style="color: #666; font-weight: 500;">車位編號：</span>
                        <span style="color: #2c3e50; font-weight: 600;">${property.parking_space || 'B2-219'}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0; padding: 6px 0; background: rgba(102, 126, 234, 0.05); border-radius: 4px; padding: 8px;">
                        <span style="color: #666; font-weight: 500;">管理費：</span>
                        <span style="color: #e74c3c; font-weight: 600;">${property.management_fee || '1,619元/月'}</span>
                    </div>
                </div>
            `;

            // 添加動畫樣式
            const style = document.createElement('style');
            style.textContent = `
                @keyframes tooltipSlideIn {
                    from {
                        opacity: 0;
                        transform: translateY(10px) scale(0.95);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                }
            `;
            document.head.appendChild(style);

            // 全域關閉函數
            window.closeAreaTooltip = function() {
                tooltip.remove();
                document.removeEventListener('click', closeTooltip);
                document.removeEventListener('scroll', closeTooltip);
                delete window.closeAreaTooltip;
            };

            document.body.appendChild(tooltip);

            // 點擊其他地方關閉浮框
            const closeTooltip = (e) => {
                if (!tooltip.contains(e.target) && e.target !== clickedElement) {
                    tooltip.remove();
                    document.removeEventListener('click', closeTooltip);
                    document.removeEventListener('scroll', closeTooltip);
                    delete window.closeAreaTooltip;
                }
            };

            // 滾動時關閉浮框
            const closeOnScroll = () => {
                tooltip.remove();
                document.removeEventListener('click', closeTooltip);
                document.removeEventListener('scroll', closeTooltip);
                delete window.closeAreaTooltip;
            };

            setTimeout(() => {
                document.addEventListener('click', closeTooltip);
                document.addEventListener('scroll', closeTooltip, true);
            }, 100);
        }

        // 全域變數儲存當前彈窗
        let currentLightbox = null;
        let currentMapModal = null;
        let currentPropertyModal = null;
        let currentLoanCalculator = null;

        // 關閉燈箱函數
        function closeLightbox() {
            if (currentLightbox) {
                currentLightbox.remove();
                currentLightbox = null;
                
                // 如果有詳細資訊彈窗被隱藏，重新顯示它
                if (currentPropertyModal && currentPropertyModal.style.display === 'none') {
                    currentPropertyModal.style.display = 'flex';
                }
            }
        }

        // 關閉地圖彈窗函數
        function closeMapModal() {
            if (currentMapModal) {
                currentMapModal.remove();
                currentMapModal = null;
            }
        }

        // 貸款試算功能
        function showLoanCalculator(propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (property) {
                // 提取價格數字（移除"萬"字）
                const priceMatch = property.price.match(/(\d+(?:,\d+)*)/);
                const propertyPrice = priceMatch ? parseInt(priceMatch[1].replace(/,/g, '')) : 896;
                
                // 設定房屋總價
                document.getElementById('modalHousePrice').value = propertyPrice;
                
                // 顯示彈窗
                document.getElementById('loanModal').style.display = 'block';
                
                // 重新綁定滑桿事件
                setTimeout(() => {
                    bindSliderEvents();
                    bindInputEvents();
                    calculateModalLoan();
                }, 100);
            }
        }

        // 關閉貸款試算彈窗
        function closeLoanModal() {
            document.getElementById('loanModal').style.display = 'none';
        }

        // 滑桿值更新
        function bindSliderEvents() {
            const loanRatioSlider = document.getElementById('modalLoanRatio');
            const loanYearsSlider = document.getElementById('modalLoanYears');
            const interestRateSlider = document.getElementById('modalInterestRate');
            const agentFeeSlider = document.getElementById('modalAgentFee');
            
            if (loanRatioSlider) {
                loanRatioSlider.addEventListener('input', function() {
                    document.getElementById('modalLoanRatioValue').textContent = this.value + '%';
                    calculateModalLoan();
                });
            }
            
            if (loanYearsSlider) {
                loanYearsSlider.addEventListener('input', function() {
                    document.getElementById('modalLoanYearsValue').textContent = this.value + '年';
                    calculateModalLoan();
                });
            }
            
            if (interestRateSlider) {
                interestRateSlider.addEventListener('input', function() {
                    document.getElementById('modalInterestRateValue').textContent = this.value + '%';
                    calculateModalLoan();
                });
            }
            
            if (agentFeeSlider) {
                agentFeeSlider.addEventListener('input', function() {
                    document.getElementById('modalAgentFeeValue').textContent = this.value + '%';
                    calculateModalLoan();
                });
            }
        }

        // 綁定輸入框事件
        function bindInputEvents() {
            const inputs = ['modalHousePrice', 'modalServiceFee', 'modalNotaryFee', 'modalMonthlyIncome', 'modalOtherExpenses'];
            inputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', calculateModalLoan);
                }
            });
            
            const selects = ['modalExistingLoan', 'modalGracePeriod', 'modalRepaymentType'];
            selects.forEach(id => {
                const select = document.getElementById(id);
                if (select) {
                    select.addEventListener('change', calculateModalLoan);
                }
            });
        }

        // 調整貸款條件
        function adjustLoanConditions() {
            const existingLoan = document.getElementById('modalExistingLoan').value;
            const loanRatioSlider = document.getElementById('modalLoanRatio');
            const gracePeriodSelect = document.getElementById('modalGracePeriod');
            const interestRateSlider = document.getElementById('modalInterestRate');
            
            if (existingLoan === 'existing') {
                // 第二戶貸款：限制貸款成數50%，取消寬限期
                loanRatioSlider.max = 50;
                loanRatioSlider.value = Math.min(loanRatioSlider.value, 50);
                document.getElementById('modalLoanRatioValue').textContent = loanRatioSlider.value + '%';
                
                gracePeriodSelect.value = '0';
                
                interestRateSlider.min = 1.5;
                interestRateSlider.max = 5;
                interestRateSlider.value = Math.max(interestRateSlider.value, 1.5);
                document.getElementById('modalInterestRateValue').textContent = interestRateSlider.value + '%';
                
            } else if (existingLoan === 'youth') {
                // 新青安貸款：限制1000萬額度，優惠利率，5年寬限期
                loanRatioSlider.max = 80;
                loanRatioSlider.value = Math.min(loanRatioSlider.value, 80);
                document.getElementById('modalLoanRatioValue').textContent = loanRatioSlider.value + '%';
                
                gracePeriodSelect.value = '5';
                
                interestRateSlider.min = 1.2;
                interestRateSlider.max = 2.0;
                interestRateSlider.value = 1.8;
                document.getElementById('modalInterestRateValue').textContent = interestRateSlider.value + '%';
                
            } else {
                // 首購：恢復正常條件
                loanRatioSlider.max = 85;
                loanRatioSlider.value = Math.min(loanRatioSlider.value, 85);
                document.getElementById('modalLoanRatioValue').textContent = loanRatioSlider.value + '%';
                
                gracePeriodSelect.value = '5';
                
                interestRateSlider.min = 1.5;
                interestRateSlider.max = 5;
                interestRateSlider.value = Math.max(interestRateSlider.value, 1.5);
                document.getElementById('modalInterestRateValue').textContent = interestRateSlider.value + '%';
            }
            
            calculateModalLoan();
        }

        // 貸款試算計算功能
        function calculateModalLoan() {
            const housePrice = parseFloat(document.getElementById('modalHousePrice').value) * 10000;
            const loanRatio = parseFloat(document.getElementById('modalLoanRatio').value) / 100;
            const loanYears = parseInt(document.getElementById('modalLoanYears').value);
            const interestRate = parseFloat(document.getElementById('modalInterestRate').value) / 100;
            const gracePeriod = parseInt(document.getElementById('modalGracePeriod').value) || 0;
            const serviceFee = parseFloat(document.getElementById('modalServiceFee').value) || 0;
            const notaryFee = parseFloat(document.getElementById('modalNotaryFee').value) || 0;
            const agentFeeRate = parseFloat(document.getElementById('modalAgentFee').value) || 0;
            const agentFee = housePrice * (agentFeeRate / 100);
            const repaymentType = document.getElementById('modalRepaymentType').value;
            const monthlyIncome = parseFloat(document.getElementById('modalMonthlyIncome').value) * 10000 || 0;
            const otherExpenses = parseFloat(document.getElementById('modalOtherExpenses').value) * 10000 || 0;
            const existingLoan = document.getElementById('modalExistingLoan').value;
            
            if (!housePrice || housePrice <= 0) {
                return;
            }
            
            // 基本計算
            const loanAmount = housePrice * loanRatio;
            const downPayment = housePrice - loanAmount;
            
            // 新青安混合貸款計算
            let youthLoanAmount = 0;
            let normalLoanAmount = 0;
            let youthInterestRate = interestRate;
            let normalInterestRate = interestRate;
            
            if (existingLoan === 'youth') {
                youthLoanAmount = Math.min(loanAmount, 10000000);
                normalLoanAmount = Math.max(0, loanAmount - 10000000);
                youthInterestRate = 1.8 / 100;
                normalInterestRate = 2.8 / 100;
            }
            
            // 貸款計算
            const totalMonths = loanYears * 12;
            const graceMonths = gracePeriod * 12;
            const remainingMonths = totalMonths - graceMonths;
            
            // 計算月付金額
            let gracePayment = 0;
            let normalPayment = 0;
            
            if (existingLoan === 'youth' && youthLoanAmount > 0) {
                // 新青安混合貸款
                const youthMonthlyRate = youthInterestRate / 12;
                const normalMonthlyRate = normalInterestRate / 12;
                
                gracePayment = (youthLoanAmount * youthMonthlyRate) + (normalLoanAmount * normalMonthlyRate);
                
                if (remainingMonths > 0) {
                    const youthNormalPayment = youthLoanAmount * youthMonthlyRate * Math.pow(1 + youthMonthlyRate, remainingMonths) / 
                                             (Math.pow(1 + youthMonthlyRate, remainingMonths) - 1);
                    const normalNormalPayment = normalLoanAmount > 0 ? 
                        normalLoanAmount * normalMonthlyRate * Math.pow(1 + normalMonthlyRate, remainingMonths) / 
                        (Math.pow(1 + normalMonthlyRate, remainingMonths) - 1) : 0;
                    normalPayment = youthNormalPayment + normalNormalPayment;
                }
            } else {
                // 一般貸款
                const monthlyRate = interestRate / 12;
                gracePayment = loanAmount * monthlyRate;
                
                if (remainingMonths > 0) {
                    if (repaymentType === 'equal_payment') {
                        normalPayment = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, remainingMonths) / 
                                      (Math.pow(1 + monthlyRate, remainingMonths) - 1);
                    } else {
                        // 等額本金
                        const principalPayment = loanAmount / remainingMonths;
                        normalPayment = principalPayment + (loanAmount * monthlyRate);
                    }
                }
            }
            
            // 計算總費用
            const totalFees = serviceFee + notaryFee + agentFee;
            const totalCost = downPayment + totalFees;
            
            // 計算負擔比
            const currentPayment = gracePeriod > 0 ? gracePayment : normalPayment;
            const availableIncome = monthlyIncome - otherExpenses;
            const debtRatio = availableIncome > 0 ? (currentPayment / availableIncome) * 100 : 0;
            
            // 生成結果 HTML
            let resultsHTML = `
                <div class="loan-result-card">
                    <div class="loan-result-title">💰 貸款資訊</div>
                    <div class="loan-result-grid">
                        <div>房屋總價：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(housePrice / 10000)}萬</div>
                        <div>貸款金額：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(loanAmount / 10000)}萬</div>
                        <div>自備款：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(downPayment / 10000)}萬</div>
                    </div>
                </div>
                
                <div class="loan-result-card">
                    <div class="loan-result-title">📅 還款計劃</div>
                    <div class="loan-result-grid">
                        <div>${gracePeriod > 0 ? `寬限期${gracePeriod}年：` : '每月還款：'}</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(currentPayment).toLocaleString()}元</div>
                        ${gracePeriod > 0 ? `
                        <div>正常還款：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(normalPayment).toLocaleString()}元</div>
                        ` : ''}
                    </div>
                </div>
                
                <div class="loan-result-card">
                    <div class="loan-result-title">💸 買方費用</div>
                    <div class="loan-result-grid">
                        <div>代書費+契稅：</div>
                        <div style="color: #10b981; font-weight: bold;">${serviceFee.toLocaleString()}元</div>
                        <div>代書潤筆費：</div>
                        <div style="color: #10b981; font-weight: bold;">${notaryFee.toLocaleString()}元</div>
                        <div>仲介費：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(agentFee).toLocaleString()}元</div>
                        <div>總費用：</div>
                        <div style="color: #e74c3c; font-weight: bold;">${totalFees.toLocaleString()}元</div>
                    </div>
                </div>
                
                <div class="loan-result-card">
                    <div class="loan-result-title">📊 負擔評估</div>
                    <div class="loan-result-grid">
                        <div>月收入：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(monthlyIncome / 10000)}萬元</div>
                        <div>其他支出：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(otherExpenses / 10000)}萬元</div>
                        <div>可用資金：</div>
                        <div style="color: #10b981; font-weight: bold;">${Math.round(availableIncome / 10000)}萬元</div>
                        <div>房貸占比：</div>
                        <div style="color: ${debtRatio <= 30 ? '#27ae60' : debtRatio <= 40 ? '#f39c12' : '#e74c3c'}; font-weight: bold;">${debtRatio.toFixed(1)}%</div>
                    </div>
                </div>
                
                <div class="loan-result-highlight">
                    <h3>建議評估</h3>
                    <div style="font-size: 0.9rem;">
                        ${debtRatio <= 30 ? '房貸負擔合理，建議可考慮此物件' : 
                          debtRatio <= 40 ? '房貸負擔較重，建議謹慎評估' : 
                          '房貸負擔過重，建議重新考慮'}
                    </div>
                    <div class="amount">
                        總準備金：${Math.round(totalCost / 10000)}萬元
                    </div>
                </div>
            `;
            
            document.getElementById('modalLoanResults').innerHTML = resultsHTML;
        }

        // 點擊背景關閉彈窗
        window.onclick = function(event) {
            const loanModal = document.getElementById('loanModal');
            if (event.target === loanModal) {
                closeLoanModal();
            }
        }

        // 縮圖滾動功能
        function scrollThumbnails(direction) {
            const thumbnailsContainer = document.querySelector('.thumbnails');
            if (thumbnailsContainer) {
                const scrollAmount = 200; // 每次滾動的距離
                if (direction === 'left') {
                    thumbnailsContainer.scrollLeft -= scrollAmount;
                } else if (direction === 'right') {
                    thumbnailsContainer.scrollLeft += scrollAmount;
                }
            }
        }

        // 觸控手勢變數
        let touchStartX = 0;
        let touchStartY = 0;

        // 處理觸控開始
        function handleTouchStart(event, propertyId) {
            if (event.touches.length === 1) {
                touchStartX = event.touches[0].clientX;
                touchStartY = event.touches[0].clientY;
            }
        }

        // 處理觸控結束
        function handleTouchEnd(event, propertyId) {
            if (event.changedTouches.length === 1) {
                const touchEndX = event.changedTouches[0].clientX;
                const touchEndY = event.changedTouches[0].clientY;
                const deltaX = touchEndX - touchStartX;
                const deltaY = touchEndY - touchStartY;
                
                // 確保是水平滑動（水平距離大於垂直距離）
                if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
                    const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
                    if (!property || !property.images || !currentLightbox) return;
                    
                    const currentIndexElement = currentLightbox.querySelector('.current-image-index');
                    if (!currentIndexElement) return;
                    
                    let currentIndex = parseInt(currentIndexElement.textContent.split('/')[0]) - 1;
                    let newIndex;
                    
                    if (deltaX > 0) {
                        // 向右滑動，顯示上一張
                        newIndex = currentIndex - 1;
                        if (newIndex < 0) {
                            newIndex = property.images.length - 1;
                        }
                    } else {
                        // 向左滑動，顯示下一張
                        newIndex = currentIndex + 1;
                        if (newIndex >= property.images.length) {
                            newIndex = 0;
                        }
                    }
                    
                    updateLightboxImage(newIndex, propertyId);
                }
            }
        }


        // 切換主圖片（箭頭按鈕用）
        function changeMainImage(direction, propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (!property || !property.images || !currentLightbox) return;
            
            const currentIndexElement = currentLightbox.querySelector('.current-image-index');
            if (!currentIndexElement) return;
            
            let currentIndex = parseInt(currentIndexElement.textContent.trim().split('/')[0].replace('照片', '').trim()) - 1;
            let newIndex = currentIndex + direction;
            
            // 循環切換
            if (newIndex < 0) {
                newIndex = property.images.length - 1;
            } else if (newIndex >= property.images.length) {
                newIndex = 0;
            }
            
            updateLightboxImage(newIndex, propertyId);
        }

        // 更新燈箱照片內容
        function updateLightboxImage(newImageIndex, propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (property && property.images && property.images[newImageIndex] && currentLightbox) {
                // 更新主照片
                const mainImage = currentLightbox.querySelector('img[alt="物件照片"]');
                if (mainImage) {
                    mainImage.src = property.images[newImageIndex];
                }
                
                // 更新照片資訊
                const photoInfo = currentLightbox.querySelector('.current-image-index');
                if (photoInfo) {
                    photoInfo.textContent = `照片 ${newImageIndex + 1} / ${property.images.length}`;
                }
                
                // 更新縮圖邊框樣式
                const thumbnails = currentLightbox.querySelectorAll('.thumbnails img');
                thumbnails.forEach((thumb, idx) => {
                    if (idx === newImageIndex) {
                        thumb.style.border = '2px solid #667eea';
                    } else {
                        thumb.style.border = '1px solid #ddd';
                    }
                });
            }
        }

        // 照片燈箱功能
        function openLightbox(imageIndex, propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (property && property.images && property.images[imageIndex]) {
                // 隱藏詳細資訊彈窗
                if (currentPropertyModal) {
                    currentPropertyModal.style.display = 'none';
                }
                
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.9);
                    z-index: 10001;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    padding: 20px;
                    box-sizing: border-box;
                `;
                
                modal.innerHTML = `
                    <div style="
                        position: relative;
                        max-width: 100vw;
                        max-height: 90vh;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                    ">
                        <!-- 關閉按鈕 -->
                        <button onclick="closeLightbox()" style="
                            position: absolute;
                            top: -50px;
                            right: 0;
                            background: linear-gradient(45deg, #e74c3c, #c0392b);
                            color: white;
                            border: none;
                            width: 40px;
                            height: 40px;
                            border-radius: 50%;
                            cursor: pointer;
                            font-size: 20px;
                            font-weight: bold;
                            z-index: 10001;
                            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
                            transition: all 0.3s ease;
                        " onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">×</button>
                        
                        <!-- 照片容器 -->
                        <div style="
                            background: white;
                            border-radius: 15px;
                            padding: 20px;
                            box-shadow: 0 25px 50px rgba(0,0,0,0.4);
                            position: relative;
                            overflow: hidden;
                        ">
                            <!-- 左箭頭 -->
                            <button class="main-image-arrow-left" data-direction="-1" data-property-id="${propertyId}" style="
                                position: absolute;
                                left: 40px;
                                top: 50%;
                                transform: translateY(-50%);
                                background: rgba(0, 0, 0, 0.7);
                                color: white;
                                border: none;
                                width: 60px;
                                height: 60px;
                                border-radius: 50%;
                                cursor: pointer;
                                z-index: 10002;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 24px;
                                font-weight: bold;
                                box-shadow: 0 4px 15px rgba(0,0,0,0.4);
                                transition: all 0.3s ease;
                                pointer-events: auto;
                            " onmouseover="this.style.background='rgba(0, 0, 0, 0.9)'; this.style.transform='translateY(-50%) scale(1.1)'" onmouseout="this.style.background='rgba(0, 0, 0, 0.7)'; this.style.transform='translateY(-50%) scale(1)'">‹</button>
                            
                            <!-- 右箭頭 -->
                            <button class="main-image-arrow-right" data-direction="1" data-property-id="${propertyId}" style="
                                position: absolute;
                                right: 40px;
                                top: 50%;
                                transform: translateY(-50%);
                                background: rgba(0, 0, 0, 0.7);
                                color: white;
                                border: none;
                                width: 60px;
                                height: 60px;
                                border-radius: 50%;
                                cursor: pointer;
                                z-index: 10002;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 24px;
                                font-weight: bold;
                                box-shadow: 0 4px 15px rgba(0,0,0,0.4);
                                transition: all 0.3s ease;
                                pointer-events: auto;
                            " onmouseover="this.style.background='rgba(0, 0, 0, 0.9)'; this.style.transform='translateY(-50%) scale(1.1)'" onmouseout="this.style.background='rgba(0, 0, 0, 0.7)'; this.style.transform='translateY(-50%) scale(1)'">›</button>
                            
                            <img src="${property.images[imageIndex]}" 
                                 alt="物件照片" 
                                 loading="eager"
                                 style="
                                     max-width: 80vw;
                                     max-height: 70vh;
                                     object-fit: contain;
                                     border-radius: 10px;
                                     box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                                     touch-action: manipulation;
                                     -webkit-user-select: none;
                                     user-select: none;
                                     pointer-events: auto;
                                     z-index: 1;
                                 "
                                 onerror="this.style.border='2px solid #e74c3c'; this.alt='❌ 照片載入失敗'"
                                 ondragstart="return false;"
                                 ontouchstart="handleTouchStart(event, '${propertyId}')"
                                 ontouchend="handleTouchEnd(event, '${propertyId}')"
                                 onclick="event.stopPropagation();">
                        </div>
                        
                        <!-- 照片資訊 -->
                        <div style="
                            background: rgba(255,255,255,0.95);
                            color: #2c3e50;
                            padding: 15px 25px;
                            border-radius: 25px;
                            margin-top: 20px;
                            text-align: center;
                            backdrop-filter: blur(10px);
                            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
                        ">
                            <h3 style="margin: 0 0 5px 0; font-size: 1.2rem; font-weight: 700;">
                                ${property.title}
                            </h3>
                            <p class="current-image-index" style="margin: 0; opacity: 0.8; font-size: 0.9rem;">
                                照片 ${imageIndex + 1} / ${property.images.length}
                            </p>
                        </div>
                        
                        
                        <!-- 縮圖導航 -->
                        ${property.images.length > 1 ? `
                        <div style="margin-top: 15px; z-index: 10; position: relative;">
                            <div class="thumbnails" style="display: flex; gap: 8px; padding: 10px; background: rgba(255,255,255,0.9); border-radius: 10px; width: 100%; max-width: 100vw; overflow-x: auto; -webkit-overflow-scrolling: touch; scrollbar-width: thin; justify-content: center; pointer-events: auto;">
                                ${property.images.map((img, idx) => `
                                    <img src="${img}" 
                                         alt="縮圖 ${idx + 1}" 
                                         loading="lazy"
                                         onclick="updateLightboxImage(${idx}, '${propertyId}'); event.stopPropagation();"
                                         style="width: 50px; height: 38px; object-fit: cover; border-radius: 6px; cursor: pointer; border: ${idx === imageIndex ? '2px solid #667eea' : '1px solid #ddd'}; flex-shrink: 0; pointer-events: auto;"
                                         onmouseover="this.style.transform='scale(1.05)'" 
                                         onmouseout="this.style.transform='scale(1)'">
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}
                    </div>
                `;
                
                modal.className = 'modal';
                document.body.appendChild(modal);
                
                // 儲存到全域變數
                currentLightbox = modal;
                
                // 添加主圖片箭頭按鈕事件監聽器
                const leftArrow = modal.querySelector('.main-image-arrow-left');
                const rightArrow = modal.querySelector('.main-image-arrow-right');
                
                if (leftArrow) {
                    leftArrow.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const direction = parseInt(leftArrow.getAttribute('data-direction'));
                        const propertyId = leftArrow.getAttribute('data-property-id');
                        changeMainImage(direction, propertyId);
                    });
                }
                
                if (rightArrow) {
                    rightArrow.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const direction = parseInt(rightArrow.getAttribute('data-direction'));
                        const propertyId = rightArrow.getAttribute('data-property-id');
                        changeMainImage(direction, propertyId);
                    });
                }
                
                // 點擊背景關閉
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        closeLightbox();
                    }
                });
                
                // ESC 鍵關閉
                const handleEsc = (e) => {
                    if (e.key === 'Escape') {
                        closeLightbox();
                        document.removeEventListener('keydown', handleEsc);
                    }
                };
                document.addEventListener('keydown', handleEsc);
                
            }
        }

        // 地圖彈窗功能
        function showMapModal(propertyId) {
            const property = embeddedPropertiesData.properties.find(p => p.id === propertyId);
            if (property) {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.9);
                    z-index: 10000;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    padding: 20px;
                    box-sizing: border-box;
                `;
                
                modal.innerHTML = `
                        <div style="
                            background: white;
                            border-radius: 15px;
                            max-width: 100vw;
                            max-height: 350vh;
                            position: relative;
                            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                            overflow: hidden;
                        ">
                        <!-- 關閉按鈕 -->
                        <button onclick="closeMapModal()" style="
                            position: absolute;
                            top: 15px;
                            right: 15px;
                            background: #e74c3c;
                            color: white;
                            border: none;
                            width: 35px;
                            height: 35px;
                            border-radius: 50%;
                            cursor: pointer;
                            font-size: 20px;
                            font-weight: bold;
                            z-index: 10001;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                        ">×</button>
                        
                        <!-- 地圖標題 -->
                        <div style="padding: 20px 30px 10px 30px; background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <h2 style="margin: 0; font-size: 1.3rem; font-weight: 600;">
                                <i class="fas fa-map-marker-alt"></i> ${property.title} - 位置地圖
                            </h2>
                            <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 0.9rem;">
                                📍 ${property.address}
                            </p>
                        </div>
                        
                        <!-- 地圖容器 -->
                        <div class="map-container" style="width: 100%; height: 30vh; min-height: 300px;">
                            <iframe src="${property.google_maps || 'https://www.google.com/maps/embed?pb=!4v1758635508112!6m8!1m7!1sTcuziJwB6dHCbFzTFsQVIw!2m2!1d24.90580115978875!2d121.1774002660474!3f281.776500634199!4f24.362884434893175!5f0.7820865974627469'}" 
                                    width="100%" 
                                    height="100%" 
                                    style="border:0;" 
                                    allowfullscreen="" 
                                    loading="lazy" 
                                    referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                        
                        <!-- 地圖操作按鈕 -->
                        <div class="map-buttons" style="padding: 20px 30px; background: #f8f9fa; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(property.address)}" 
                               target="_blank" 
                               style="
                                   background: linear-gradient(45deg, #4285f4, #34a853);
                                   color: white;
                                   text-decoration: none;
                                   padding: 10px 20px;
                                   border-radius: 25px;
                                   font-weight: 600;
                                   display: inline-flex;
                                   align-items: center;
                                   gap: 8px;
                                   transition: all 0.3s ease;
                               " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                <i class="fas fa-external-link-alt"></i> 在 Google Maps 中開啟
                            </a>
                            <a href="https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(property.address)}" 
                               target="_blank" 
                               style="
                                   background: linear-gradient(45deg, #ff6b6b, #ee5a24);
                                   color: white;
                                   text-decoration: none;
                                   padding: 10px 20px;
                                   border-radius: 25px;
                                   font-weight: 600;
                                   display: inline-flex;
                                   align-items: center;
                                   gap: 8px;
                                   transition: all 0.3s ease;
                               " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                <i class="fas fa-route"></i> 規劃路線
                            </a>
                        </div>
                    </div>
                `;
                
                modal.className = 'modal';
                document.body.appendChild(modal);
                
                // 儲存到全域變數
                currentMapModal = modal;
                
                // 點擊背景關閉
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        closeMapModal();
                    }
                });
                
                // ESC 鍵關閉
                const handleEsc = (e) => {
                    if (e.key === 'Escape') {
                        closeMapModal();
                        document.removeEventListener('keydown', handleEsc);
                    }
                };
                document.addEventListener('keydown', handleEsc);
            }
        }

        // F5 鍵處理 - 確保在當前頁面刷新
        document.addEventListener('keydown', function(e) {
            // F5 鍵的 keyCode 是 116
            if (e.keyCode === 116 || e.key === 'F5') {
                e.preventDefault();
                location.reload();
            }
        });

        // 初始化系統
        let embeddedPaginationSystem;
        document.addEventListener('DOMContentLoaded', function() {
            embeddedPaginationSystem = new EmbeddedPropertyPaginationSystem();
            
            // 客戶見證輪播功能
            let currentTestimonialIndex = 0;
            const testimonialSlides = document.getElementById('testimonialSlides');
            const testimonialPrev = document.getElementById('testimonialPrev');
            const testimonialNext = document.getElementById('testimonialNext');
            const totalTestimonials = document.querySelectorAll('.testimonial-slide').length;

            function updateTestimonialCarousel() {
                if (testimonialSlides) {
                    testimonialSlides.style.transform = `translateX(-${currentTestimonialIndex * 100}%)`;
                }
            }

            if (testimonialPrev) {
                testimonialPrev.addEventListener('click', () => {
                    currentTestimonialIndex = currentTestimonialIndex > 0 ? currentTestimonialIndex - 1 : totalTestimonials - 1;
                    updateTestimonialCarousel();
                });
            }

            if (testimonialNext) {
                testimonialNext.addEventListener('click', () => {
                    currentTestimonialIndex = currentTestimonialIndex < totalTestimonials - 1 ? currentTestimonialIndex + 1 : 0;
                    updateTestimonialCarousel();
                });
            }

            // 自動播放客戶見證
            setInterval(() => {
                if (totalTestimonials > 1) {
                    currentTestimonialIndex = currentTestimonialIndex < totalTestimonials - 1 ? currentTestimonialIndex + 1 : 0;
                    updateTestimonialCarousel();
                }
            }, 5000);
            
            // 房產資訊參考下拉選單功能
            const propertyInfoDropdown = document.getElementById('propertyInfoDropdown');
            const propertyInfoMenu = document.getElementById('propertyInfoMenu');
            
            if (propertyInfoDropdown && propertyInfoMenu) {
                propertyInfoDropdown.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isVisible = propertyInfoMenu.style.display === 'block';
                    propertyInfoMenu.style.display = isVisible ? 'none' : 'block';
                    
                    // 更新箭頭方向
                    const arrow = propertyInfoDropdown.querySelector('span');
                    if (arrow) {
                        arrow.textContent = isVisible ? '▼' : '▲';
                    }
                });
                
                // 點擊其他地方關閉選單
                document.addEventListener('click', () => {
                    propertyInfoMenu.style.display = 'none';
                    const arrow = propertyInfoDropdown.querySelector('span');
                    if (arrow) {
                        arrow.textContent = '▼';
                    }
                });
                
                // 防止選單內部點擊關閉選單
                propertyInfoMenu.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            }
        });
    </script>
</body>
</html>
